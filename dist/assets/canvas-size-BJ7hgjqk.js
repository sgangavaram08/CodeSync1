/*!
 * canvas-size
 * v1.2.6
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2023 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function H(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,o,f,i=[],s=!0,h=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(l){h=!0,a=l}finally{try{if(!s&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(h)throw a}}return i}}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C(Object(r),!0).forEach(function(n){R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R(e,t,r){return t=Q(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,o;for(o=0;o<n.length;o++)a=n[o],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function F(e,t){if(e==null)return{};var r=U(e,t),n,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function W(e,t){return K(e)||H(e,t)||I(e,t)||N()}function j(e){return G(e)||B(e)||I(e)||J()}function G(e){if(Array.isArray(e))return T(e)}function K(e){if(Array.isArray(e))return e}function B(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function I(e,t){if(e){if(typeof e=="string")return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}function T(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q(e){var t=q(e,"string");return typeof t=="symbol"?t:String(t)}function w(e){var t=e.sizes.shift(),r=Math.max(Math.ceil(t[0]),1),n=Math.max(Math.ceil(t[1]),1),a=[r-1,n-1,1,1],o=Date.now(),f=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,i,s;f?(i=new OffscreenCanvas(1,1),s=new OffscreenCanvas(r,n)):(i=document.createElement("canvas"),i.width=1,i.height=1,s=document.createElement("canvas"),s.width=r,s.height=n);var h=i.getContext("2d"),l=s.getContext("2d");l&&(l.fillRect.apply(l,a),h.drawImage(s,r-1,n-1,1,1,0,0,1,1));var v=h&&h.getImageData(0,0,1,1).data[3]!==0,c=Date.now()-o;return[i,s].forEach(function(m){m.height=0,m.width=0}),f?(postMessage({width:r,height:n,benchmark:c,isTestPass:v}),!v&&e.sizes.length&&w(e)):v?e.onSuccess(r,n,c):(e.onError(r,n,c),e.sizes.length&&w(e)),v}var z={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},V=["onError","onSuccess"],y={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},g={};function A(e){var t=e.width===e.height,r=e.height===1,n=e.width===1,a=[];if(!e.width||!e.height)e.sizes.forEach(function(l){var v=t||r?l:1,c=t||n?l:1;a.push([v,c])});else for(var o=e.min||y.min,f=e.step||y.step,i=Math.max(e.width,e.height);i>=o;){var s=t||r?i:1,h=t||n?i:1;a.push([s,h]),i-=f}return a}function P(e){var t=window&&"HTMLCanvasElement"in window,r=window&&"OffscreenCanvas"in window,n=Date.now(),a=e.onError,o=e.onSuccess,f=F(e,V),i=null;if(!t)return!1;if(e.useWorker&&r){var s=`
            var canvasTest = `.concat(w.toString(),`;
            onmessage = function(e) {
                canvasTest(e.data);
            };
        `),h=new Blob([s],{type:"application/javascript"}),l=URL.createObjectURL(h);i=new Worker(l),URL.revokeObjectURL(l),i.onmessage=function(v){var c=v.data,m=c.width,O=c.height,S=c.benchmark,E=c.isTestPass;E?(g[n].onSuccess(m,O,S),delete g[n]):g[n].onError(m,O,S)}}if(e.usePromise)return new Promise(function(v,c){var m=u(u({},e),{},{onError:function(p,d,b){var x;if(e.sizes.length===0)x=!0;else{var M=e.sizes.slice(-1),D=W(M,1),k=W(D[0],2),_=k[0],L=k[1];x=p===_&&d===L}a(p,d,b),x&&c({width:p,height:d,benchmark:b})},onSuccess:function(p,d,b){o(p,d,b),v({width:p,height:d,benchmark:b})}});if(i){var O=m.onError,S=m.onSuccess;g[n]={onError:O,onSuccess:S},i.postMessage(f)}else w(m)});if(i)g[n]={onError:a,onSuccess:o},i.postMessage(f);else return w(e)}var X={maxArea:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=A({width:t.max,height:t.max,min:t.min,step:t.step,sizes:j(z.area)}),n=u(u(u({},y),t),{},{sizes:r});return P(n)},maxHeight:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=A({width:1,height:t.max,min:t.min,step:t.step,sizes:j(z.height)}),n=u(u(u({},y),t),{},{sizes:r});return P(n)},maxWidth:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=A({width:t.max,height:1,min:t.min,step:t.step,sizes:j(z.width)}),n=u(u(u({},y),t),{},{sizes:r});return P(n)},test:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=u(u({},y),t);return r.sizes=j(r.sizes),r.width&&r.height&&(r.sizes=[[r.width,r.height]]),P(r)}};export{X as c};
