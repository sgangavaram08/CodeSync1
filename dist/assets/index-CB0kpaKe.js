import{j as e,r as o}from"./react-D4eHrszB.js";import{R as it}from"./react-dom-BnvxbSMe.js";import{L as pe,B as at}from"./react-router-dom-Dv65Wqmd.js";import{O as lt,c as P,V as I}from"./react-hot-toast-cB_lT3TF.js";import{l as ct}from"./socket.io-client-pgtUPCnp.js";import{L as dt,a as Te,b as he,c as ut,d as mt,R as ft,e as pt,f as ht,A as gt,g as xt,P as Re,M as Le,T as bt,B as wt,h as Oe,I as yt,G as Ct,i as Fe,j as jt,k as Ce,F as Nt,l as Et,m as vt,n as St,o as Dt,p as It,q as kt,r as Tt,s as Rt,t as Lt,u as Ot,v as je,w as Ft,x as At}from"./react-icons-BT4wkqfm.js";import{v as Z}from"./uuid-CtRu48qb.js";import{a as ie}from"./axios-B62VicFi.js";import{F as Pt}from"./file-saver-Djip2q1l.js";import{J as _t}from"./jszip-CtSIKovu.js";import{M as Ae}from"./react-markdown-Cbm9cbDO.js";import{h as Pe,d as _e}from"./react-syntax-highlighter-4sOKe3Ta.js";import{I as Mt}from"./vscode-icons-js-Chox8ZBA.js";import{I as Me}from"./@iconify-D1lTZm3E.js";import{c as ae}from"./classnames-C5re8Ct7.js";import{l as Ue}from"./lang-map-nLg5Kdxm.js";import{x as Ut,a as Gt,w as zt,b as Ht,v as $t,t as Bt,c as Jt,d as Yt,e as Vt,s as Wt,f as qt,g as Kt,r as Qt,q as Xt,o as Zt,n as es,h as ts,m as ss,i as ns,j as rs,k as os,l as is,p as as,u as ls,y as cs,z as ds,A as us,B as ms,C as fs,D as ps,E as hs,F as gs,G as xs,H as bs,I as ws,J as ys,K as Cs,L as js,M as Ns,N as Es,O as vs,P as Ss,Q as Ds,R as fe,S as Is,T as ks,U as Ts,V as Rs}from"./@uiw-BLRsaEaQ.js";import{A as Ls}from"./react-avatar-CKTPSUox.js";import{a as re,d as Ge,b as be,e as Os,f as de}from"./react-router-BXQZ7K7S.js";import{S as Fs}from"./react-split-DLg9NTUn.js";import{M as ze}from"./react-tooltip-CGrbpvVQ.js";import{T as As}from"./tldraw-BahO6yBZ.js";import{u as Ps}from"./@tldraw-Dx2Mye0e.js";import"./lodash.isequal-CWPzDpkQ.js";import"./lodash.throttle-yuuEgjvB.js";import"./idb-Bn1DMRyg.js";import"./lodash.uniq-BHEsPF9E.js";import"./core-js-Dkw2Z0CP.js";import"./lz-string-CzHELm9r.js";import"./hotkeys-js-BfWqkGRU.js";import{E as _s,bV as Ms,bW as Us,bX as Gs}from"./@codemirror-DpmaQCQz.js";import{s as Ne}from"./screenfull-DmVOzVZz.js";import{n as zs,O as Hs,M as $s,f as Bs,l as Js}from"./@tsparticles-DXuLxCR3.js";import"./charenc-CI8Jn5z4.js";import"./scheduler-C323NY8X.js";import"./@remix-run-Bwh-Hsl8.js";import"./goober-np-fLvOt.js";import"./engine.io-client-DBBxzneW.js";import"./engine.io-parser-BiEtp6m2.js";import"./@socket.io-Dkula2eQ.js";import"./socket.io-parser-BBkuslX-.js";import"./devlop-Cl3hj7Sz.js";import"./unified-Bh_Of6rg.js";import"./bail-FqpXQuLt.js";import"./extend-D1C0LVzC.js";import"./trough-B_b8ryxu.js";import"./vfile-tbz-BywF.js";import"./vfile-message-Bq256rVA.js";import"./unist-util-stringify-position-Ch_qCilz.js";import"./remark-parse-C8jcMe6G.js";import"./mdast-util-from-markdown-CgCUhJTR.js";import"./micromark-util-decode-numeric-character-reference-CNs1qBpV.js";import"./micromark-util-decode-string-strjl-tx.js";import"./decode-named-character-reference-C3-224fz.js";import"./micromark-util-normalize-identifier-C9ANKk3v.js";import"./micromark-DhRKOnvZ.js";import"./micromark-util-combine-extensions-Bka6Sc1c.js";import"./micromark-util-chunked-DrRIdSP-.js";import"./micromark-factory-space-CA-Wq7KA.js";import"./micromark-util-character-Ch8j4vtg.js";import"./micromark-core-commonmark-CDnWrFBr.js";import"./micromark-util-classify-character-GCpR5yWH.js";import"./micromark-util-resolve-all-PQCKh0dx.js";import"./micromark-util-subtokenize-BC4BSQ9J.js";import"./micromark-factory-destination-CkgxUJuk.js";import"./micromark-factory-label-U15tx9Nh.js";import"./micromark-factory-title-reCpaPbc.js";import"./micromark-factory-whitespace-_v4v79HM.js";import"./micromark-util-html-tag-name-DbKNfynz.js";import"./mdast-util-to-string-C_aolqmU.js";import"./remark-rehype-C7cpKZXR.js";import"./mdast-util-to-hast--qmxlI7R.js";import"./@ungap-DDJC10qW.js";import"./micromark-util-sanitize-uri-WGc3xW3f.js";import"./unist-util-position-60F3QETU.js";import"./trim-lines-D8znQY54.js";import"./unist-util-visit-C5MGqtgf.js";import"./unist-util-visit-parents-BC5uWo4u.js";import"./unist-util-is-D9KQvrmg.js";import"./hast-util-to-jsx-runtime-BLSwkn7M.js";import"./comma-separated-tokens-xMQ5YY98.js";import"./property-information-Bcl-LqRA.js";import"./space-separated-tokens-DD3iYX1K.js";import"./style-to-js-CDqmnN_d.js";import"./style-to-object-Oc--562q.js";import"./inline-style-parser-D4u_cg7q.js";import"./hast-util-whitespace-D4Wp6AEg.js";import"./estree-util-is-identifier-name-BgBfM8ME.js";import"./html-url-attributes-D46m5wfe.js";import"./@babel-BM-RmR6T.js";import"./refractor-BVbasmXx.js";import"./hastscript-Cxyc55ZY.js";import"./xtend-VQg9yHl6.js";import"./hast-util-parse-selector-BXt8oe2z.js";import"./@lezer-Csp4QB38.js";import"./codemirror-lang-mermaid-CgP1sc6u.js";import"./@replit-CtI0wgL6.js";import"./@nextjournal-W5TzFINk.js";import"./colors-named-CSGyx1iI.js";import"./colors-named-hex-Db6HdBCI.js";import"./hsl-matcher-CyxH9sTP.js";import"./core-js-pure-C4mLA_hu.js";import"./prop-types-yNpOvJnk.js";import"./is-retina-BzLP6e3E.js";import"./md5-BDDM8jU4.js";import"./crypt-VTvMai_Y.js";import"./is-buffer-DMJNLjvk.js";import"./split.js-CPyVEc61.js";import"./@floating-ui-BzqXKjP-.js";import"./@radix-ui-DJHLK9JK.js";import"./react-remove-scroll-HUmJw4Ao.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-DPwyq3bU.js";import"./react-style-singleton-DCU7KiAK.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-Bu3-skEY.js";import"./use-callback-ref-DTbYw0Nv.js";import"./aria-hidden-DQ5UC2Eg.js";import"./canvas-size-BJ7hgjqk.js";import"./@use-gesture-Bwv92teB.js";import"./eventemitter3-D4IiiiOJ.js";import"./crelt-C8TCjufn.js";import"./style-mod-gVpFNjS1.js";import"./w3c-keyname-Vcq4gwWv.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Ys(){return e.jsx(lt,{position:"top-right"})}var se=(t=>(t.CODING="coding",t.DRAWING="drawing",t))(se||{}),ue=(t=>(t.OFFLINE="offline",t.ONLINE="online",t))(ue||{}),q=(t=>(t.INITIAL="initial",t.CONNECTING="connecting",t.ATTEMPTING_JOIN="attempting-join",t.JOINED="joined",t.CONNECTION_FAILED="connection-failed",t.DISCONNECTED="disconnected",t))(q||{});const He=o.createContext(null),Y=()=>{const t=o.useContext(He);if(t===null)throw new Error("useAppContext must be used within a AppContextProvider");return t};function Vs({children:t}){const[s,n]=o.useState([]),[r,i]=o.useState(q.INITIAL),[a,c]=o.useState({username:"",roomId:""}),[u,d]=o.useState(se.CODING),[l,m]=o.useState(null);return e.jsx(He.Provider,{value:{users:s,setUsers:n,currentUser:a,setCurrentUser:c,status:r,setStatus:i,activityState:u,setActivityState:d,drawingData:l,setDrawingData:m},children:t})}var g=(t=>(t.JOIN_REQUEST="join-request",t.JOIN_ACCEPTED="join-accepted",t.USER_JOINED="user-joined",t.USER_DISCONNECTED="user-disconnected",t.SYNC_FILE_STRUCTURE="sync-file-structure",t.DIRECTORY_CREATED="directory-created",t.DIRECTORY_UPDATED="directory-updated",t.DIRECTORY_RENAMED="directory-renamed",t.DIRECTORY_DELETED="directory-deleted",t.FILE_CREATED="file-created",t.FILE_UPDATED="file-updated",t.FILE_RENAMED="file-renamed",t.FILE_DELETED="file-deleted",t.USER_OFFLINE="user-offline",t.USER_ONLINE="online",t.SEND_MESSAGE="send-message",t.RECEIVE_MESSAGE="receive-message",t.TYPING_START="typing-start",t.TYPING_PAUSE="typing-pause",t.USERNAME_EXISTS="username-exists",t.REQUEST_DRAWING="request-drawing",t.SYNC_DRAWING="sync-drawing",t.DRAWING_UPDATE="drawing-update",t.FILE_LOCK_TOGGLED="file-lock-toggled",t.GENERATE_TEST="generate-test",t.TEST_GENERATED="test-generated",t.COMMIT_CHANGES="commit-changes",t.COMMIT_CREATED="commit-created",t.BRANCH_CREATED="branch-created",t.BRANCH_SWITCHED="branch-switched",t.PULL_CODE="pull-code",t.MERGE_BRANCHES="merge-branches",t))(g||{});const $e=o.createContext(null),K=()=>{const t=o.useContext($e);if(!t)throw new Error("useSocket must be used within a SocketProvider");return t},Ws="http://localhost:3000",qs=({children:t})=>{const{users:s,setUsers:n,setStatus:r,setCurrentUser:i,drawingData:a,setDrawingData:c}=Y(),u=o.useMemo(()=>ct(Ws,{reconnectionAttempts:2}),[]),d=o.useCallback(x=>{console.log("socket error",x),r(q.CONNECTION_FAILED),P.dismiss(),P.error("Failed to connect to the server")},[r]),l=o.useCallback(()=>{P.dismiss(),r(q.INITIAL),P.error("The username you chose already exists in the room. Please choose a different username.")},[r]),m=o.useCallback(({user:x,users:E})=>{i(x),n(E),P.dismiss(),r(q.JOINED),E.length>1&&P.loading("Syncing data, please wait...")},[i,r,n]),h=o.useCallback(({user:x})=>{P.success(`${x.username} left the room`),n(s.filter(E=>E.username!==x.username))},[n,s]),b=o.useCallback(({socketId:x})=>{u.emit(g.SYNC_DRAWING,{socketId:x,drawingData:a})},[a,u]),f=o.useCallback(({drawingData:x})=>{c(x)},[c]);return o.useEffect(()=>(u.on("connect_error",d),u.on("connect_failed",d),u.on(g.USERNAME_EXISTS,l),u.on(g.JOIN_ACCEPTED,m),u.on(g.USER_DISCONNECTED,h),u.on(g.REQUEST_DRAWING,b),u.on(g.SYNC_DRAWING,f),()=>{u.off("connect_error"),u.off("connect_failed"),u.off(g.USERNAME_EXISTS),u.off(g.JOIN_ACCEPTED),u.off(g.USER_DISCONNECTED),u.off(g.REQUEST_DRAWING),u.off(g.SYNC_DRAWING)}),[f,d,m,b,h,l,n,u]),e.jsx($e.Provider,{value:{socket:u},children:t})},Be=o.createContext(null),we=()=>{const t=o.useContext(Be);if(!t)throw new Error("useChatRoom must be used within a ChatContextProvider");return t};function Ks({children:t}){const{socket:s}=K(),[n,r]=o.useState([]),[i,a]=o.useState(!1),[c,u]=o.useState(0);return o.useEffect(()=>(s.on(g.RECEIVE_MESSAGE,({message:d})=>{r(l=>[...l,d]),a(!0)}),()=>{s.off(g.RECEIVE_MESSAGE)}),[s]),e.jsx(Be.Provider,{value:{messages:n,setMessages:r,isNewMessage:i,setIsNewMessage:a,lastScrollHeight:c,setLastScrollHeight:u},children:t})}function Qs(t){const s=new Date(t);let n=s.getHours();const r=String(s.getMinutes()).padStart(2,"0"),i=n>=12?"PM":"AM";return n=n%12,n=n||12,`${n}:${r} ${i}`}function Xs(){const{currentUser:t}=Y(),{socket:s}=K(),{setMessages:n}=we(),r=o.useRef(null),i=a=>{var u;a.preventDefault();const c=(u=r.current)==null?void 0:u.value.trim();if(c&&c.length>0){const d={id:Z(),message:c,username:t.username,timestamp:Qs(new Date().toISOString())};s.emit(g.SEND_MESSAGE,{message:d}),n(l=>[...l,d]),r.current&&(r.current.value="")}};return e.jsxs("form",{onSubmit:i,className:"flex justify-between rounded-md border border-primary",children:[e.jsx("input",{type:"text",className:"w-full flex-grow rounded-md border-none bg-dark p-2 outline-none",placeholder:"Enter a message...",ref:r}),e.jsx("button",{className:"flex items-center justify-center rounded-r-md  bg-primary p-2 text-black",type:"submit",children:e.jsx(dt,{size:24})})]})}function Zs(){const{messages:t,isNewMessage:s,setIsNewMessage:n,lastScrollHeight:r,setLastScrollHeight:i}=we(),{currentUser:a}=Y(),c=o.useRef(null),u=d=>{const l=d.target;i(l.scrollTop)};return o.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[t]),o.useEffect(()=>{s&&n(!1),c.current&&(c.current.scrollTop=r)},[s,n,r]),e.jsx("div",{className:"flex-grow overflow-auto rounded-md bg-darkHover p-2",ref:c,onScroll:u,children:t.map((d,l)=>e.jsxs("div",{className:"mb-2 w-[80%] self-end break-words rounded-md bg-dark px-3 py-2"+(d.username===a.username?" ml-auto ":""),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-xs text-primary",children:d.username}),e.jsx("span",{className:"text-xs text-white",children:d.timestamp})]}),e.jsx("p",{className:"py-1",children:d.message})]},l))})}function le(){const[t,s]=o.useState({width:window.innerWidth,height:window.innerHeight}),[n,r]=o.useState(window.innerWidth<768);return o.useEffect(()=>{const i=()=>{s({width:window.innerWidth,height:window.innerHeight}),r(window.innerWidth<768)};return window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},[]),{...t,isMobile:n}}function V(){const[t,s]=o.useState(!1),{height:n,isMobile:r}=le(),[i,a]=o.useState(n);return o.useEffect(()=>{n<500&&r?(s(!0),a(n)):r?(s(!1),a(n-50)):(s(!1),a(n))},[n,r,i]),{viewHeight:i,minHeightReached:t}}const en=()=>{const{viewHeight:t}=V();return e.jsxs("div",{className:"flex max-h-full min-h-[400px] w-full flex-col gap-2 p-4",style:{height:t},children:[e.jsx("h1",{className:"view-title",children:"Group Chat"}),e.jsx(Zs,{}),e.jsx(Xs,{})]})},tn="https://text.pollinations.ai",sn=ie.create({baseURL:tn,headers:{"Content-Type":"application/json"}}),Je=o.createContext(null),Ye=()=>{const t=o.useContext(Je);if(t===null)throw new Error("useCopilot must be used within a CopilotContextProvider");return t},nn=({children:t})=>{const[s,n]=o.useState(""),[r,i]=o.useState(""),[a,c]=o.useState(!1),u=async()=>{try{if(s.length===0){I.error("Please write a prompt");return}I.loading("Generating code..."),c(!0);const d=await sn.post("/",{messages:[{role:"system",content:"You are a code generator copilot for project named Code Sync. Generate code based on the given prompt without any explanation. Return only the code, formatted in Markdown using the appropriate language syntax (e.g., js for JavaScript, py for Python). Do not include any additional text or explanations. If you don't know the answer, respond with 'I don't know'."},{role:"user",content:s}],model:"mistral",private:!0});if(d.data){I.success("Code generated successfully");const l=d.data;l&&i(l)}c(!1),I.dismiss()}catch(d){console.error(d),c(!1),I.dismiss(),I.error("Failed to generate the code")}};return e.jsx(Je.Provider,{value:{setInput:n,output:r,isRunning:a,generateCode:u},children:t})},rn=`function sayHi() {
  console.log("👋 Hello world");
}

sayHi()`,on={name:"root",id:Z(),type:"directory",children:[{id:Z(),type:"file",name:"index.js",content:rn}]},Ve=(t,s)=>{if(t.id===s&&t.type==="directory")return t;if(t.type==="directory"&&t.children)for(const n of t.children){const r=Ve(n,s);if(r)return r}return null},Ee=(t,s)=>t.children?t.children.some(n=>n.name===s):!1,ve=(t,s)=>{const n=r=>{if(r.id===s)return r;if(r.children)for(const i of r.children){const a=n(i);if(a)return a}return null};return n(t)},We=t=>{if(t.type==="directory"&&t.children){let s=t.children.filter(r=>r.type==="directory");const n=t.children.filter(r=>r.type==="file");s.sort((r,i)=>r.name.localeCompare(i.name)),s=s.map(r=>We(r)),n.sort((r,i)=>r.name.localeCompare(i.name)),t.children=[...s.filter(r=>r.name.startsWith(".")),...s.filter(r=>!r.name.startsWith(".")),...n.filter(r=>r.name.startsWith(".")),...n.filter(r=>!r.name.startsWith("."))]}return t},qe=o.createContext(null),Q=()=>{const t=o.useContext(qe);if(!t)throw new Error("useFileSystem must be used within FileContextProvider");return t};function an({children:t}){const{socket:s}=K(),{setUsers:n,drawingData:r}=Y(),[i,a]=o.useState(on),c=i.children?i.children:[],[u,d]=o.useState(c),[l,m]=o.useState(u[0]),h=p=>{const w=j=>j.id===p?{...j,isOpen:!j.isOpen}:j.children?{...j,children:j.children.map(w)}:j;a(j=>w(j))},b=()=>{const p=w=>{var j;return{...w,isOpen:!1,children:(j=w.children)==null?void 0:j.map(p)}};a(w=>p(w))},f=o.useCallback((p,w,j=!0)=>{let N;typeof w=="string"?N={id:Z(),name:w,type:"directory",children:[],isOpen:!1}:N=w,p||(p=i.id);const D=y=>y.id===p?{...y,children:[...y.children||[],N]}:y.children?{...y,children:y.children.map(D)}:y;return a(y=>D(y)),j&&s.emit(g.DIRECTORY_CREATED,{parentDirId:p,newDirectory:N}),N.id},[i.id,s]),x=o.useCallback((p,w,j=!0)=>{p||(p=i.id);const N=D=>D.id===p?{...D,children:w}:D.children?{...D,children:D.children.map(N)}:D;a(D=>N(D)),d([]),m(null),p===i.id&&(P.dismiss(),P.success("Files and folders updated")),j&&s.emit(g.DIRECTORY_UPDATED,{dirId:p,children:w})},[i.id,s]),E=o.useCallback((p,w,j=!0)=>{const N=y=>y.type==="directory"&&y.children?y.children.some(F=>F.type==="directory"&&F.name===w&&F.id!==p)?null:{...y,children:y.children.map(F=>{if(F.id===p)return{...F,name:w};if(F.type==="directory"){const ce=N(F);return ce!==null?ce:F}else return F})}:y,D=N(i);return D===null?!1:(a(D),j&&s.emit(g.DIRECTORY_RENAMED,{dirId:p,newDirName:w}),!0)},[s,a,i]),v=o.useCallback((p,w=!0)=>{const j=N=>{if(N.type==="directory"&&N.id===p)return null;if(N.children){const D=N.children.map(j).filter(y=>y!==null);return{...N,children:D}}else return N};a(N=>j(N)),w&&s.emit(g.DIRECTORY_DELETED,{dirId:p})},[s]),S=p=>{const w=ve(i,p);w&&(M((l==null?void 0:l.id)||"",(l==null?void 0:l.content)||""),u.some(j=>j.id===p)||d(j=>[...j,w]),d(j=>j.map(N=>N.id===(l==null?void 0:l.id)?{...N,content:l.content||""}:N)),m(w))},O=p=>{if(p===(l==null?void 0:l.id)){M(l.id,l.content||"");const w=u.findIndex(j=>j.id===p);w!==-1&&u.length>1?w>0?m(u[w-1]):m(u[w+1]):m(null)}d(w=>w.filter(j=>j.id!==p))},_=o.useCallback((p,w,j=!0)=>{let N=1;p||(p=i.id);const D=Ve(i,p);if(!D)throw new Error("Parent directory not found");let y;if(typeof w=="string"){let F=w,ce=Ee(D,F);for(;ce;)F=`${F.split(".")[0]}(${N}).${F.split(".")[1]}`,ce=Ee(D,F),N++;y={id:Z(),name:F,type:"file",content:""}}else y=w;const J=F=>F.id===D.id?{...F,children:[...F.children||[],y],isOpen:!0}:F.children?{...F,children:F.children.map(J)}:F;return a(F=>J(F)),d(F=>[...F,y]),m(y),j&&s.emit(g.FILE_CREATED,{parentDirId:p,newFile:y}),y.id},[i,s]),M=o.useCallback((p,w)=>{const j=N=>N.type==="file"&&N.id===p?{...N,content:w}:N.children?{...N,children:N.children.map(j)}:N;a(N=>j(N)),u.some(N=>N.id===p)&&d(N=>N.map(D=>D.id===p?{...D,content:w}:D))},[u]),T=o.useCallback((p,w,j=!0)=>{const N=D=>D.type==="directory"&&D.children?{...D,children:D.children.map(y=>y.type==="file"&&y.id===p?{...y,name:w}:y)}:D;return a(D=>N(D)),d(D=>D.map(y=>y.id===p?{...y,name:w}:y)),p===(l==null?void 0:l.id)&&m(D=>D?{...D,name:w}:null),j&&s.emit(g.FILE_RENAMED,{fileId:p,newName:w}),!0},[l==null?void 0:l.id,s]),A=o.useCallback((p,w=!0)=>{const j=N=>{if(N.type==="directory"&&N.children){const D=N.children.map(y=>y.type==="directory"?j(y):y.id!==p?y:null).filter(y=>y!==null);return{...N,children:D}}else return N};a(N=>j(N)),u.some(N=>N.id===p)&&d(N=>N.filter(D=>D.id!==p)),(l==null?void 0:l.id)===p&&m(null),P.success("File deleted successfully"),w&&s.emit(g.FILE_DELETED,{fileId:p})},[l==null?void 0:l.id,u,s]),G=()=>{const p=new _t,w=(j,N="")=>{const D=N+j.name+(j.type==="directory"?"/":"");if(j.type==="file")p.file(D,j.content||"");else if(j.type==="directory"&&j.children)for(const y of j.children)w(y,D)};if(i.type==="directory"&&i.children)for(const j of i.children)w(j);p.generateAsync({type:"blob"}).then(j=>{Pt.saveAs(j,"download.zip")})},B=o.useCallback((p,w,j=!0)=>{var D;const N=y=>{if(y.id===p){const J=!y.isLocked;return{...y,isLocked:J,lockedBy:J?w:void 0}}else return y.children?{...y,children:y.children.map(N)}:y};a(y=>N(y)),d(y=>y.map(J=>J.id===p?{...J,isLocked:!J.isLocked,lockedBy:J.isLocked?void 0:w}:J)),(l==null?void 0:l.id)===p&&m(y=>{if(y){const J=!y.isLocked;return{...y,isLocked:J,lockedBy:J?w:void 0}}return y}),j&&s.emit(g.FILE_LOCK_TOGGLED,{fileId:p,username:w,isLocked:!((D=ve(i,p))!=null&&D.isLocked)})},[i,l,s]),U=o.useCallback(({user:p})=>{P.success(`${p.username} joined the room`),s.emit(g.SYNC_FILE_STRUCTURE,{fileStructure:i,openFiles:u,activeFile:l,socketId:p.socketId}),s.emit(g.SYNC_DRAWING,{drawingData:r,socketId:p.socketId}),n(w=>[...w,p])},[l,r,i,u,n,s]),$=o.useCallback(({fileStructure:p,openFiles:w,activeFile:j})=>{a(p),d(w),m(j),P.dismiss()},[]),X=o.useCallback(({parentDirId:p,newDirectory:w})=>{f(p,w,!1)},[f]),oe=o.useCallback(({dirId:p,children:w})=>{x(p,w,!1)},[x]),C=o.useCallback(({dirId:p,newName:w})=>{E(p,w,!1)},[E]),k=o.useCallback(({dirId:p})=>{v(p,!1)},[v]),L=o.useCallback(({parentDirId:p,newFile:w})=>{_(p,w,!1)},[_]),H=o.useCallback(({fileId:p,newContent:w})=>{M(p,w),(l==null?void 0:l.id)===p&&m({...l,content:w})},[l,M]),W=o.useCallback(({fileId:p,newName:w})=>{T(p,w,!1)},[T]),z=o.useCallback(({fileId:p})=>{A(p,!1)},[A]),ee=o.useCallback(({fileId:p,username:w,isLocked:j})=>{const N=D=>D.id===p?{...D,isLocked:j,lockedBy:j?w:void 0}:D.children?{...D,children:D.children.map(N)}:D;a(D=>N(D)),d(D=>D.map(y=>y.id===p?{...y,isLocked:j,lockedBy:j?w:void 0}:y)),(l==null?void 0:l.id)===p&&(m(y=>y&&{...y,isLocked:j,lockedBy:j?w:void 0}),P(`${w} has ${j?"locked":"unlocked"} this file`))},[l,a,d,m]);return o.useEffect(()=>(s.once(g.SYNC_FILE_STRUCTURE,$),s.on(g.USER_JOINED,U),s.on(g.DIRECTORY_CREATED,X),s.on(g.DIRECTORY_UPDATED,oe),s.on(g.DIRECTORY_RENAMED,C),s.on(g.DIRECTORY_DELETED,k),s.on(g.FILE_CREATED,L),s.on(g.FILE_UPDATED,H),s.on(g.FILE_RENAMED,W),s.on(g.FILE_DELETED,z),s.on(g.FILE_LOCK_TOGGLED,ee),()=>{s.off(g.USER_JOINED),s.off(g.DIRECTORY_CREATED),s.off(g.DIRECTORY_UPDATED),s.off(g.DIRECTORY_RENAMED),s.off(g.DIRECTORY_DELETED),s.off(g.FILE_CREATED),s.off(g.FILE_UPDATED),s.off(g.FILE_RENAMED),s.off(g.FILE_DELETED),s.off(g.FILE_LOCK_TOGGLED)}),[X,k,C,oe,L,z,W,$,H,ee,U,s]),e.jsx(qe.Provider,{value:{fileStructure:i,openFiles:u,activeFile:l,setActiveFile:m,closeFile:O,toggleDirectory:h,collapseDirectories:b,createDirectory:f,updateDirectory:x,renameDirectory:E,deleteDirectory:v,openFile:S,createFile:_,updateFileContent:M,renameFile:T,deleteFile:A,downloadFilesAndFolders:G,toggleFileLock:B},children:t})}var R=(t=>(t.FILES="Files",t.CLIENTS="Clients",t.SETTINGS="Settings",t.CHATS="Chats",t.COPILOT="Copilot",t.RUN="Run",t.VERSION_CONTROL="Version Control",t.TEST_GENERATOR="Test Generator",t))(R||{});function ln(){const{socket:t}=K(),{viewHeight:s}=V(),{generateCode:n,output:r,isRunning:i,setInput:a}=Ye(),{activeFile:c,updateFileContent:u,setActiveFile:d}=Q(),{setActiveView:l}=me(),m=async()=>{try{const x=r.replace(/```[\w]*\n?/g,"").trim();await navigator.clipboard.writeText(x),I.success("Output copied to clipboard")}catch(x){I.error("Unable to copy output to clipboard"),console.log(x)}},h=()=>{if(c){const E=`${c.content?`${c.content}
`:""}${r.replace(/```[\w]*\n?/g,"").trim()}`;u(c.id,E),d({...c,content:E}),I.success("Code pasted successfully"),t.emit(g.FILE_UPDATED,{fileId:c.id,newContent:E})}},b=()=>{if(c){if(!confirm("Are you sure you want to replace the code in the file?"))return;const E=r.replace(/```[\w]*\n?/g,"").trim();u(c.id,E),d({...c,content:E}),I.success("Code replaced successfully"),t.emit(g.FILE_UPDATED,{fileId:c.id,newContent:E})}},f=()=>{if(!c){I.error("Please open a file first to generate tests");return}l(R.TEST_GENERATOR),I.success("Switched to test generator view")};return e.jsxs("div",{className:"flex max-h-full min-h-[400px] w-full flex-col gap-2 p-4",style:{height:s},children:[e.jsx("h1",{className:"view-title",children:"Copilot"}),e.jsx("textarea",{className:"min-h-[120px] w-full rounded-md border-none bg-darkHover p-2 text-white outline-none",placeholder:"What code do you want to generate?",onChange:x=>a(x.target.value)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"mt-1 flex flex-grow justify-center rounded-md bg-primary p-2 font-bold text-black outline-none disabled:cursor-not-allowed disabled:opacity-50",onClick:n,disabled:i,children:i?"Generating...":"Generate Code"}),e.jsx("button",{className:"mt-1 flex justify-center rounded-md bg-emerald-600 p-2 font-bold text-white outline-none disabled:cursor-not-allowed disabled:opacity-50",onClick:f,title:"Generate test cases for current file",children:e.jsx(Te,{size:20})})]}),r&&e.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[e.jsx("button",{title:"Copy Output",onClick:m,children:e.jsx(he,{size:18,className:"cursor-pointer text-white"})}),e.jsx("button",{title:"Replace code in file",onClick:b,children:e.jsx(ut,{size:18,className:"cursor-pointer text-white"})}),e.jsx("button",{title:"Paste code in file",onClick:h,children:e.jsx(mt,{size:18,className:"cursor-pointer text-white"})})]}),e.jsx("div",{className:"h-full rounded-lg w-full overflow-y-auto p-0",children:e.jsx(Ae,{components:{code({inline:x,className:E,children:v,...S}){const O=/language-(\w+)/.exec(E||""),_=O?O[1]:"javascript";return x?e.jsx("code",{className:E,...S,children:v}):e.jsx(Pe,{style:_e,language:_,PreTag:"pre",className:"!m-0 !h-full !rounded-lg !bg-gray-900 !p-2",children:String(v).replace(/\n$/,"")})},pre({children:x}){return e.jsx("pre",{className:"h-full",children:x})}},children:r})})]})}const Ke=({ref:t})=>{const[s,n]=o.useState(!1),[r,i]=o.useState({x:0,y:0});return o.useEffect(()=>{const a=t.current;if(!a)return;const c=()=>{n(!1)},u=l=>{t.current&&t.current.contains(l.target)?(n(!0),i({x:l.pageX,y:l.pageY})):n(!1)},d=l=>{l.preventDefault(),n(!0),i({x:l.pageX,y:l.pageY})};return a.addEventListener("contextmenu",d),document.addEventListener("click",c),document.addEventListener("contextmenu",u),()=>{a.removeEventListener("contextmenu",d),document.removeEventListener("click",c),document.removeEventListener("contextmenu",u)}},[t]),{menuOpen:s,setMenuOpen:n,coords:r,setCoords:i}},Qe=t=>{var r;return`vscode-icons:${(r=Mt.getIconForFile(t))==null?void 0:r.replace(/_/g,"-").split(".")[0]}`};function Xe({id:t,preName:s,setEditing:n,type:r}){const[i,a]=o.useState(s||""),{renameFile:c,openFile:u,renameDirectory:d}=Q(),l=o.useRef(null),m=f=>{f.preventDefault(),f.stopPropagation();const x=r.charAt(0).toUpperCase()+r.slice(1);if(i==="")I.error(`${x} name cannot be empty`);else if(i.length>25)I.error(`${x} name cannot be longer than 25 characters`);else if(i===s)I.error(`${x} name cannot be the same as before`);else{const E=r==="directory"?d(t,i):c(t,i);E&&r==="file"&&u(t),E?n(!1):I.error(`${x} with same name already exists`)}},h=o.useCallback(f=>{var x;f.key==="Enter"?(x=l.current)==null||x.requestSubmit():f.key==="Escape"&&n(!1)},[n]),b=o.useCallback(f=>{const x=l.current;x&&!x.contains(f.target)&&n(!1)},[n]);return o.useEffect(()=>{const f=l.current;if(f)return f.focus(),f.addEventListener("keydown",h),document.addEventListener("keydown",b),document.addEventListener("click",b),()=>{f.removeEventListener("keydown",h),document.removeEventListener("keydown",b),document.removeEventListener("click",b)}},[b,h,n]),e.jsx("div",{className:"rounded-md",children:e.jsx("form",{onSubmit:m,ref:l,className:"flex w-full items-center gap-2 rounded-md",children:e.jsx("input",{type:"text",className:"w-full flex-grow rounded-sm bg-dark px-2 text-base text-white outline-none",autoFocus:!0,value:i,onChange:f=>a(f.target.value)})})})}function cn(){const{fileStructure:t,createFile:s,createDirectory:n,collapseDirectories:r}=Q(),i=o.useRef(null),[a,c]=o.useState(null),{minHeightReached:u}=V(),d=b=>{i.current&&!i.current.contains(b.target)&&c(t.id)},l=()=>{const b=prompt("Enter file name");if(b){const f=a||t.id;s(f,b)}},m=()=>{const b=prompt("Enter directory name");if(b){const f=a||t.id;n(f,b)}},h=We(t);return e.jsxs("div",{onClick:d,className:"flex flex-grow flex-col",children:[e.jsxs("div",{className:"view-title flex justify-between",children:[e.jsx("h2",{children:"Files"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"rounded-md px-1 hover:bg-darkHover",onClick:l,title:"Create File",children:e.jsx(ft,{size:20})}),e.jsx("button",{className:"rounded-md px-1 hover:bg-darkHover",onClick:m,title:"Create Directory",children:e.jsx(pt,{size:20})}),e.jsx("button",{className:"rounded-md px-1 hover:bg-darkHover",onClick:r,title:"Collapse All Directories",children:e.jsx(ht,{size:20})})]})]}),e.jsx("div",{className:ae("min-h-[200px] flex-grow overflow-auto pr-2 sm:min-h-0",{"h-[calc(80vh-170px)]":!u,"h-[85vh]":u}),ref:i,children:h.children&&h.children.map(b=>e.jsx(Ze,{item:b,setSelectedDirId:c},b.id))})]})}function Ze({item:t,setSelectedDirId:s}){const[n,r]=o.useState(!1),i=o.useRef(null),{coords:a,menuOpen:c,setMenuOpen:u}=Ke({ref:i}),{deleteDirectory:d,toggleDirectory:l}=Q(),m=f=>{s(f),l(f)},h=f=>{f.stopPropagation(),u(!1),r(!0)},b=(f,x)=>{f.stopPropagation(),u(!1),confirm("Are you sure you want to delete directory?")&&d(x)};return o.useEffect(()=>{const f=i.current;if(!f)return;f.tabIndex=0;const x=E=>{E.stopPropagation(),E.key==="F2"&&r(!0)};return f.addEventListener("keydown",x),()=>{f.removeEventListener("keydown",x)}},[]),t.type==="file"?e.jsx(dn,{item:t,setSelectedDirId:s}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"flex w-full items-center rounded-md px-2 py-1 hover:bg-darkHover",onClick:()=>m(t.id),ref:i,children:[t.isOpen?e.jsx(gt,{size:24,className:"mr-2 min-w-fit"}):e.jsx(xt,{size:24,className:"mr-2 min-w-fit"}),n?e.jsx(Xe,{id:t.id,preName:t.name,type:"directory",setEditing:r}):e.jsx("p",{className:"flex-grow cursor-pointer overflow-hidden truncate",title:t.name,children:t.name})]}),e.jsx("div",{className:ae({hidden:!t.isOpen},{block:t.isOpen},{"pl-4":t.name!=="root"}),children:t.children&&t.children.map(f=>e.jsx(Ze,{item:f,setSelectedDirId:s},f.id))}),c&&e.jsx(mn,{handleDeleteDirectory:b,handleRenameDirectory:h,id:t.id,left:a.x,top:a.y})]})}const dn=({item:t,setSelectedDirId:s})=>{const{deleteFile:n,openFile:r}=Q(),[i,a]=o.useState(!1),{setIsSidebarOpen:c}=me(),{isMobile:u}=le(),{activityState:d,setActivityState:l}=Y(),m=o.useRef(null),{menuOpen:h,coords:b,setMenuOpen:f}=Ke({ref:m}),x=S=>{i||(s(S),r(S),u&&c(!1),d===se.DRAWING&&l(se.CODING))},E=S=>{S.stopPropagation(),a(!0),f(!1)},v=(S,O)=>{S.stopPropagation(),f(!1),confirm("Are you sure you want to delete file?")&&n(O)};return o.useEffect(()=>{const S=m.current;if(!S)return;S.tabIndex=0;const O=_=>{_.stopPropagation(),_.key==="F2"&&a(!0)};return S.addEventListener("keydown",O),()=>{S.removeEventListener("keydown",O)}},[]),e.jsxs("div",{className:"flex w-full items-center rounded-md px-2 py-1 hover:bg-darkHover",onClick:()=>x(t.id),ref:m,children:[e.jsx(Me,{icon:Qe(t.name),fontSize:22,className:"mr-2 min-w-fit"}),i?e.jsx(Xe,{id:t.id,preName:t.name,type:"file",setEditing:a}):e.jsx("p",{className:"flex-grow cursor-pointer overflow-hidden truncate",title:t.name,children:t.name}),h&&e.jsx(un,{top:b.y,left:b.x,id:t.id,handleRenameFile:E,handleDeleteFile:v})]})},un=({top:t,left:s,id:n,handleRenameFile:r,handleDeleteFile:i})=>e.jsxs("div",{className:"absolute z-10 w-[150px] rounded-md border border-darkHover bg-dark p-1",style:{top:t,left:s},children:[e.jsxs("button",{onClick:r,className:"flex w-full items-center gap-2 rounded-md px-2 py-1 hover:bg-darkHover",children:[e.jsx(Re,{size:18}),"Rename"]}),e.jsxs("button",{onClick:a=>i(a,n),className:"flex w-full items-center gap-2 rounded-md px-2 py-1 text-danger hover:bg-darkHover",children:[e.jsx(Le,{size:20}),"Delete"]})]}),mn=({top:t,left:s,id:n,handleRenameDirectory:r,handleDeleteDirectory:i})=>e.jsxs("div",{className:"absolute z-10 w-[150px] rounded-md border border-darkHover bg-dark p-1",style:{top:t,left:s},children:[e.jsxs("button",{onClick:r,className:"flex w-full items-center gap-2 rounded-md px-2 py-1 hover:bg-darkHover",children:[e.jsx(Re,{size:18}),"Rename"]}),e.jsxs("button",{onClick:a=>i(a,n),className:"flex w-full items-center gap-2 rounded-md px-2 py-1 text-danger hover:bg-darkHover",children:[e.jsx(Le,{size:20}),"Delete"]})]});function fn(){const{downloadFilesAndFolders:t,updateDirectory:s}=Q(),{viewHeight:n}=V(),{minHeightReached:r}=V(),[i,a]=o.useState(!1),c=async()=>{try{if(a(!0),"showDirectoryPicker"in window){const h=await window.showDirectoryPicker();await u(h);return}if("webkitdirectory"in HTMLInputElement.prototype){const h=document.createElement("input");h.type="file",h.webkitdirectory=!0,h.onchange=async b=>{const f=b.target.files;if(f){const x=await l(f);s("",x)}},h.click();return}P.error("Your browser does not support directory selection.")}catch(h){console.error("Error opening directory:",h),P.error("Failed to open directory")}finally{a(!1)}},u=async h=>{try{P.loading("Getting files and folders...");const b=await d(h);s("",b),P.dismiss(),P.success("Directory loaded successfully")}catch(b){console.error("Error processing directory:",b),P.error("Failed to process directory")}},d=async h=>{const b=[],f=["node_modules",".git",".vscode",".next"];for await(const x of h.values())if(x.kind==="file"){const E=await x.getFile(),v={id:Z(),name:x.name,type:"file",content:await m(E)};b.push(v)}else if(x.kind==="directory"){if(f.includes(x.name))continue;const E={id:Z(),name:x.name,type:"directory",children:await d(x),isOpen:!1};b.push(E)}return b},l=async h=>{const b=[],f=["node_modules",".git",".vscode",".next"];for(let x=0;x<h.length;x++){const E=h[x],v=E.webkitRelativePath.split("/");if(!v.some(S=>f.includes(S)))if(v.length>1){const S=v.slice(0,-1).join("/");if(b.findIndex(T=>T.name===S&&T.type==="directory")===-1){const T={id:Z(),name:S,type:"directory",children:[],isOpen:!1};b.push(T)}const _={id:Z(),name:E.name,type:"file",content:await m(E)},M=b.find(T=>T.name===S&&T.type==="directory");M&&M.children&&M.children.push(_)}else{const S={id:Z(),name:E.name,type:"file",content:await m(E)};b.push(S)}}return b},m=async h=>{if(h.size>1048576)return`File too large: ${h.name} (${Math.round(h.size/1024)}KB)`;try{return await h.text()}catch(f){return console.error(`Error reading file ${h.name}:`,f),`Error reading file: ${h.name}`}};return e.jsxs("div",{className:"flex select-none flex-col gap-1 px-4 py-2",style:{height:n,maxHeight:n},children:[e.jsx(cn,{}),e.jsxs("div",{className:ae("flex min-h-fit flex-col justify-end pt-2",{hidden:r}),children:[e.jsx("hr",{}),e.jsxs("button",{className:"mt-2 flex w-full justify-start rounded-md p-2 transition-all hover:bg-darkHover",onClick:c,disabled:i,children:[e.jsx(bt,{className:"mr-2",size:24}),i?"Loading...":"Open File/Folder"]}),e.jsxs("button",{className:"flex w-full justify-start rounded-md p-2 transition-all hover:bg-darkHover",onClick:t,children:[e.jsx(wt,{className:"mr-2",size:22})," Download Code"]})]})]})}const pn="https://emkc.org/api/v2/piston",Se=ie.create({baseURL:pn,headers:{"Content-Type":"application/json"}}),et=o.createContext(null),hn=()=>{const t=o.useContext(et);if(t===null)throw new Error("useRunCode must be used within a RunCodeContextProvider");return t},gn=({children:t})=>{const{activeFile:s}=Q(),[n,r]=o.useState(""),[i,a]=o.useState(""),[c,u]=o.useState(!1),[d,l]=o.useState([]),[m,h]=o.useState({language:"",version:"",aliases:[]});o.useEffect(()=>{(async()=>{var x,E;try{const v=await Se.get("/runtimes");l(v.data)}catch(v){I.error("Failed to fetch supported languages"),(x=v==null?void 0:v.response)!=null&&x.data&&console.error((E=v==null?void 0:v.response)==null?void 0:E.data)}})()},[]),o.useEffect(()=>{if(d.length===0||!(s!=null&&s.name))return;const f=s.name.split(".").pop();if(f){const x=Ue.languages(f),E=d.find(v=>v.aliases.includes(f)||x.includes(v.language.toLowerCase()));E&&h(E)}else h({language:"",version:"",aliases:[]})},[s==null?void 0:s.name,d]);const b=async()=>{try{if(m)if(s)I.loading("Running code...");else return I.error("Please open a file to run the code");else return I.error("Please select a language to run the code");u(!0);const{language:f,version:x}=m,E=await Se.post("/execute",{language:f,version:x,files:[{name:s.name,content:s.content}],stdin:n});E.data.run.stderr?a(E.data.run.stderr):a(E.data.run.stdout),u(!1),I.dismiss()}catch(f){console.error(f.response.data),console.error(f.response.data.error),u(!1),I.dismiss(),I.error("Failed to run the code")}};return e.jsx(et.Provider,{value:{setInput:r,output:i,isRunning:c,supportedLanguages:d,selectedLanguage:m,setSelectedLanguage:h,runCode:b},children:t})};function xn(){const{viewHeight:t}=V(),{setInput:s,output:n,isRunning:r,supportedLanguages:i,selectedLanguage:a,setSelectedLanguage:c,runCode:u}=hn(),d=m=>{const h=JSON.parse(m.target.value);c(h)},l=()=>{navigator.clipboard.writeText(n),I.success("Output copied to clipboard")};return e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4",style:{height:t},children:[e.jsx("h1",{className:"view-title",children:"Run Code"}),e.jsxs("div",{className:"flex h-[90%] w-full flex-col items-end gap-2 md:h-[92%]",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("select",{className:"w-full rounded-md border-none bg-darkHover px-4 py-2 text-white outline-none",value:JSON.stringify(a),onChange:d,children:i.sort((m,h)=>m.language>h.language?1:-1).map((m,h)=>e.jsx("option",{value:JSON.stringify(m),children:m.language+(m.version?` (${m.version})`:"")},h))}),e.jsx(Oe,{size:16,className:"absolute bottom-3 right-4 z-10 text-white"})]}),e.jsx("textarea",{className:"min-h-[120px] w-full resize-none rounded-md border-none bg-darkHover p-2 text-white outline-none",placeholder:"Write you input here...",onChange:m=>s(m.target.value)}),e.jsx("button",{className:"flex w-full justify-center rounded-md bg-primary p-2 font-bold text-black outline-none disabled:cursor-not-allowed disabled:opacity-50",onClick:u,disabled:r,children:"Run"}),e.jsxs("label",{className:"flex w-full justify-between",children:["Output :",e.jsx("button",{onClick:l,title:"Copy Output",children:e.jsx(he,{size:18,className:"cursor-pointer text-white"})})]}),e.jsx("div",{className:"w-full flex-grow resize-none overflow-y-auto rounded-md border-none bg-darkHover p-2 text-white outline-none",children:e.jsx("code",{children:e.jsx("pre",{className:"text-wrap",children:n})})})]})]})}function xe({onChange:t,value:s,options:n,title:r}){return e.jsxs("div",{className:"relative w-full",children:[e.jsx("label",{className:"mb-2",children:r}),e.jsx("select",{className:"w-full rounded-md border-none bg-darkHover px-4 py-2 text-white outline-none",value:s,onChange:t,children:n.sort().map(i=>{const a=i,c=i.charAt(0).toUpperCase()+i.slice(1);return e.jsx("option",{value:a,children:c},c)})}),e.jsx(Oe,{size:16,className:"absolute bottom-3 right-4 z-10 text-white"})]})}function tt(){return{setItem:(r,i)=>{localStorage.setItem(r,i)},getItem:r=>localStorage.getItem(r),removeItem:r=>{localStorage.removeItem(r)}}}const st=o.createContext(null),ge=()=>{const t=o.useContext(st);if(!t)throw new Error("useSettings must be used within a SettingContextProvider");return t},te={theme:"Dracula",language:"Javascript",fontSize:16,fontFamily:"Space Mono",showGitHubCorner:!0};function bn({children:t}){const{getItem:s}=tt(),n=JSON.parse(s("settings")||"{}"),r=n.theme!==void 0?n.theme:te.theme,i=n.language!==void 0?n.language:te.language,a=n.fontSize!==void 0?n.fontSize:te.fontSize,c=n.fontFamily!==void 0?n.fontFamily:te.fontFamily,u=n.showGitHubCorner!==void 0?n.showGitHubCorner:te.showGitHubCorner,[d,l]=o.useState(r),[m,h]=o.useState(i),[b,f]=o.useState(a),[x,E]=o.useState(c),[v,S]=o.useState(u),O=()=>{l(te.theme),h(te.language),f(te.fontSize),E(te.fontFamily),S(te.showGitHubCorner)};return o.useEffect(()=>{const _={theme:d,language:m,fontSize:b,fontFamily:x,showGitHubCorner:v};localStorage.setItem("settings",JSON.stringify(_))},[d,m,b,x,v]),e.jsx(st.Provider,{value:{theme:d,setTheme:l,language:m,setLanguage:h,fontSize:b,setFontSize:f,fontFamily:x,setFontFamily:E,showGitHubCorner:v,setShowGitHubCorner:S,resetSettings:O},children:t})}const wn=["Anonymous Pro","Cousine","Fira Code","Inconsolata","JetBrains Mono","Jura","Roboto Mono","Source Code Pro","Space Mono","Ubuntu Mono"],nt={Abcdef:Ds,Abyss:Ss,"Android Studio":vs,Andromeda:Es,"Atom One":Ns,Aura:js,"Basic Dark":Cs,"Basic Light":ys,BBEdit:ws,Bespin:bs,Copilot:xs,Darcula:gs,Dracula:hs,"Duotone Dark":ps,"Duotone Light":fs,Eclipse:ms,"GitHub Dark":us,"GitHub Light":ds,"Gruvbox Dark":cs,"Gruvbox Light":ls,Kimbie:as,Material:is,"Material Dark":os,"Material Light":rs,Monokai:ns,"Monokai Dimmed":ss,"Noctis Lilac":ts,Nord:es,Okaidia:Zt,"Quiet Light":Xt,Red:Qt,"Solarized Dark":Kt,"Solarized Light":qt,Sublime:Wt,"Tokyo Night":Vt,"Tokyo Night Day":Yt,"Tokyo Night Storm":Jt,"Tomorrow Night Blue":Bt,"VS Code Dark":$t,"White Dark":Ht,"White Light":zt,"Xcode Dark":Gt,"Xcode Light":Ut};function yn(){const{theme:t,setTheme:s,language:n,setLanguage:r,fontSize:i,setFontSize:a,fontFamily:c,setFontFamily:u,showGitHubCorner:d,setShowGitHubCorner:l,resetSettings:m}=ge(),{viewHeight:h}=V(),b=o.useMemo(()=>!fe.includes("cpp")&&!fe.includes("C++")?[...fe,"cpp","C++"]:fe,[]),f=S=>u(S.target.value),x=S=>s(S.target.value),E=S=>r(S.target.value),v=S=>a(parseInt(S.target.value));return o.useEffect(()=>{const S=document.querySelector(".cm-editor > .cm-scroller");S!==null&&(S.style.fontFamily=`${c}, monospace`)},[c]),e.jsxs("div",{className:"flex flex-col items-center gap-2 p-4",style:{height:h},children:[e.jsx("h1",{className:"view-title",children:"Settings"}),e.jsxs("div",{className:"flex w-full items-end gap-2",children:[e.jsx(xe,{onChange:f,value:c,options:wn,title:"Font Family"}),e.jsx("select",{value:i,onChange:v,className:"rounded-md border-none bg-darkHover px-4 py-2 text-white outline-none",title:"Font Size",children:[...Array(13).keys()].map(S=>e.jsx("option",{value:S+12,children:S+12},S))})]}),e.jsx(xe,{onChange:x,value:t,options:Object.keys(nt),title:"Theme"}),e.jsx(xe,{onChange:E,value:n,options:b,title:"Language"}),e.jsx("button",{className:"mt-auto w-full rounded-md border-none bg-darkHover px-4 py-2 text-white outline-none",onClick:m,children:"Reset to default"})]})}function Cn(){const{users:t}=Y();return e.jsx("div",{className:"flex min-h-[200px] flex-grow justify-center overflow-y-auto py-2",children:e.jsx("div",{className:"flex h-full w-full flex-wrap items-start gap-x-2 gap-y-6",children:t.map(s=>e.jsx(jn,{user:s},s.socketId))})})}const jn=({user:t})=>{const{username:s,status:n}=t,r=`${s} - ${n===ue.ONLINE?"online":"offline"}`;return e.jsxs("div",{className:"relative flex w-[100px] flex-col items-center gap-2",title:r,children:[e.jsx(Ls,{name:s,size:"50",round:"12px",title:r}),e.jsx("p",{className:"line-clamp-2 max-w-full text-ellipsis break-words",children:s}),e.jsx("div",{className:`absolute right-5 top-0 h-3 w-3 rounded-full ${n===ue.ONLINE?"bg-green-500":"bg-danger"}`})]})};function Nn(){const t=re(),{viewHeight:s}=V(),{setStatus:n}=Y(),{socket:r}=K(),i=async()=>{const u=window.location.href;try{await navigator.clipboard.writeText(u),I.success("URL copied to clipboard")}catch(d){I.error("Unable to copy URL to clipboard"),console.log(d)}},a=async()=>{const u=window.location.href;try{await navigator.share({url:u})}catch(d){I.error("Unable to share URL"),console.log(d)}},c=()=>{r.disconnect(),n(q.DISCONNECTED),t("/",{replace:!0})};return e.jsxs("div",{className:"flex flex-col p-4",style:{height:s},children:[e.jsx("h1",{className:"view-title",children:"Users"}),e.jsx(Cn,{}),e.jsx("div",{className:"flex flex-col items-center gap-4 pt-4",children:e.jsxs("div",{className:"flex w-full gap-4",children:[e.jsx("button",{className:"flex flex-grow items-center justify-center rounded-md bg-white p-3 text-black",onClick:a,title:"Share Link",children:e.jsx(yt,{size:26})}),e.jsx("button",{className:"flex flex-grow items-center justify-center rounded-md bg-white p-3 text-black",onClick:i,title:"Copy Link",children:e.jsx(he,{size:22})}),e.jsx("button",{className:"flex flex-grow items-center justify-center rounded-md bg-primary p-3 text-black",onClick:c,title:"Leave room",children:e.jsx(Ct,{size:22})})]})})]})}function En(){const{viewHeight:t}=V(),{fileStructure:s,activeFile:n,updateFileContent:r,setActiveFile:i}=Q(),{socket:a}=K(),{currentUser:c}=Y(),[u,d]=o.useState([{name:"main",current:!0},{name:"develop",current:!1},{name:"feature/user-auth",current:!1}]),[l,m]=o.useState([]),[h,b]=o.useState([]),[f,x]=o.useState(""),[E,v]=o.useState(!1),[S,O]=o.useState(!1),[_,M]=o.useState(!1),[T,A]=o.useState("");o.useEffect(()=>{const C=()=>{if(s&&s.children){const k=s.children.filter(L=>L.type==="file").slice(0,3).map(L=>({id:L.id,name:L.name,status:Math.random()>.5?"modified":"added",changes:Math.floor(Math.random()*20)+1}));b(k)}};return C(),a.on(g.FILE_UPDATED,C),a.on(g.FILE_CREATED,C),a.on(g.FILE_DELETED,C),()=>{a.off(g.FILE_UPDATED,C),a.off(g.FILE_CREATED,C),a.off(g.FILE_DELETED,C)}},[s,a]),o.useEffect(()=>((()=>{const k=[{id:"abc123",message:"Initial commit",author:c.username,timestamp:new Date(Date.now()-1728e5).toISOString(),files:3},{id:"def456",message:"Add version control feature",author:c.username,timestamp:new Date(Date.now()-864e5).toISOString(),files:5},{id:"ghi789",message:"Fix styling issues",author:c.username,timestamp:new Date(Date.now()-432e5).toISOString(),files:2}];m(k)})(),a.on(g.COMMIT_CREATED,k=>{m(L=>[k,...L])}),()=>{a.off(g.COMMIT_CREATED)}),[a,c.username]);const G=C=>{const k=new Date(C),H=(new Date-k)/1e3/60/60;return H<1?`${Math.floor(H*60)} minutes ago`:H<24?`${Math.floor(H)} hours ago`:`${Math.floor(H/24)} days ago`},B=()=>{if(h.length===0){I.error("No changes to commit");return}if(!f.trim()){I.error("Please enter a commit message");return}v(!0),setTimeout(()=>{const C={id:`c${Date.now().toString(16)}`,message:f,author:c.username,timestamp:new Date().toISOString(),files:h.length};m(k=>[C,...k]),a.emit(g.COMMIT_CREATED,C),x(""),b([]),v(!1),I.success("Commit created successfully")},1e3)},U=()=>{const C=prompt("Enter new branch name:");if(C){if(u.some(k=>k.name===C)){I.error(`Branch "${C}" already exists`);return}d(k=>k.map(L=>({...L,current:!1})).concat([{name:C,current:!0}])),a.emit(g.BRANCH_CREATED,{name:C}),I.success(`Created and switched to branch "${C}"`)}},$=C=>{d(k=>k.map(L=>({...L,current:L.name===C}))),a.emit(g.BRANCH_SWITCHED,{name:C}),I.success(`Switched to branch "${C}"`)},X=()=>{M(!0),setTimeout(()=>{const C=u.find(k=>k.current);if(!C){I.error("No active branch found"),M(!1);return}if(I.success(`Pulled latest changes from ${C.name}`),a.emit(g.PULL_CODE,{branch:C.name,by:c.username}),s&&s.children&&s.children.length>0){Math.floor(Math.random()*s.children.length);const k=s.children.find(L=>L.type==="file");if(k&&k.content){const L=k.content+`

// Changes pulled from ${C.name} by ${c.username}`;r(k.id,L),n&&n.id===k.id&&i({...n,content:L}),a.emit(g.FILE_UPDATED,{fileId:k.id,newContent:L})}}M(!1)},2e3)},oe=()=>{const C=u.find(L=>L.current);if(!C){I.error("No active branch found");return}const k=prompt(`Select a branch to merge into ${C.name}:
${u.filter(L=>!L.current).map(L=>L.name).join(`
`)}`);if(k){if(!u.some(L=>L.name===k)){I.error(`Branch "${k}" does not exist`);return}if(k===C.name){I.error("Cannot merge a branch into itself");return}O(!0),A(k),setTimeout(()=>{if(Math.random()>.7){if(I.error(`Merge conflict detected between ${C.name} and ${k}`),s&&s.children){const H=s.children.find(W=>W.type==="file");if(H){const W=`
<<<<<<< HEAD (${C.name})
// This is the content from the current branch
function currentFeature() {
  console.log("Feature from current branch");
}
=======
// This is the content from the branch being merged
function incomingFeature() {
  console.log("Feature from incoming branch");
}
>>>>>>> ${k}
`;r(H.id,W),n&&n.id===H.id&&i({...n,content:W}),a.emit(g.FILE_UPDATED,{fileId:H.id,newContent:W})}}}else{I.success(`Successfully merged ${k} into ${C.name}`);const H={id:`merge_${Date.now().toString(16)}`,message:`Merge branch '${k}' into ${C.name}`,author:c.username,timestamp:new Date().toISOString(),files:Math.floor(Math.random()*5)+1};m(W=>[H,...W]),a.emit(g.COMMIT_CREATED,H),a.emit(g.MERGE_BRANCHES,{from:k,to:C.name,by:c.username,successful:!0})}O(!1),A("")},3e3)}};return e.jsxs("div",{className:"flex max-h-full min-h-[400px] w-full flex-col gap-4 p-4",style:{height:t},children:[e.jsx("h1",{className:"view-title",children:"Version Control"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h2",{className:"text-md font-medium flex items-center gap-1",children:[e.jsx(Fe,{size:16})," Branches"]}),e.jsxs("button",{onClick:U,className:"text-xs bg-gray-700 hover:bg-gray-600 rounded-md px-2 py-1 flex items-center gap-1",children:[e.jsx(jt,{size:14})," New Branch"]})]}),e.jsx("ul",{className:"space-y-2",children:u.map(C=>e.jsx("li",{className:`cursor-pointer rounded-md px-3 py-2 ${C.current?"bg-primary text-black":"bg-gray-700 hover:bg-gray-600"}`,onClick:()=>$(C.name),children:C.name},C.name))})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-md font-medium mb-2 flex items-center gap-1",children:[e.jsx(Ce,{size:16})," Changed Files"]}),h.length>0?e.jsx("ul",{className:"space-y-2",children:h.map(C=>e.jsxs("li",{className:"border-l-2 border-gray-700 pl-3 py-1",children:[e.jsxs("div",{className:"text-sm font-medium flex items-center justify-between",children:[e.jsx("span",{children:C.name}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${C.status==="modified"?"bg-yellow-600":"bg-green-600"}`,children:C.status})]}),e.jsxs("div",{className:"text-xs text-gray-400",children:[C.changes," changes"]})]},C.id))}):e.jsx("p",{className:"text-sm text-gray-400",children:"No changed files"})]}),e.jsxs("div",{children:[e.jsx("textarea",{className:"w-full rounded-md border border-gray-700 bg-gray-800 p-2 text-sm text-white",placeholder:"Enter commit message...",value:f,onChange:C=>x(C.target.value)}),e.jsx("button",{className:"mt-2 w-full rounded-md bg-primary py-2 text-black disabled:opacity-50 disabled:cursor-not-allowed",onClick:B,disabled:E||h.length===0,children:E?"Creating Commit...":"Commit Changes"})]}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[e.jsxs("h2",{className:"text-md font-medium mb-2 flex items-center gap-1",children:[e.jsx(Nt,{size:16})," Commits"]}),l.length>0?e.jsx("ul",{className:"space-y-2",children:l.map(C=>e.jsxs("li",{className:"border-l-2 border-gray-700 pl-3 py-1",children:[e.jsx("div",{className:"text-sm font-medium",children:C.message}),e.jsxs("div",{className:"text-xs text-gray-400 flex justify-between",children:[e.jsxs("span",{children:[C.id.substring(0,7)," • ",C.author]}),e.jsxs("span",{children:[G(C.timestamp)," • ",C.files," files"]})]})]},C.id))}):e.jsx("p",{className:"text-sm text-gray-400",children:"No commits yet"})]}),e.jsxs("div",{className:"pt-2 flex gap-2",children:[e.jsxs("button",{className:"flex items-center gap-1 rounded-md bg-gray-700 hover:bg-gray-600 py-2 px-3 text-white flex-1 disabled:opacity-50 disabled:cursor-not-allowed",onClick:X,disabled:_,children:[e.jsx(Ce,{size:16}),_?"Pulling...":"Pull"]}),e.jsxs("button",{className:"flex items-center gap-1 rounded-md bg-gray-700 hover:bg-gray-600 py-2 px-3 text-white flex-1 disabled:opacity-50 disabled:cursor-not-allowed",onClick:oe,disabled:S,children:[e.jsx(Et,{size:16}),S?`Merging ${T}...`:"Merge"]})]})]})}function vn(){const{viewHeight:t}=V(),{socket:s}=K(),{activeFile:n,fileStructure:r,updateFileContent:i,setActiveFile:a,createDirectory:c,createFile:u}=Q(),{isRunning:d}=Ye(),[l,m]=o.useState(""),[h,b]=o.useState("jest"),[f,x]=o.useState(!1),[E,v]=o.useState(null);o.useEffect(()=>{const T=()=>{var G,B;const A=(G=r.children)==null?void 0:G.find(U=>U.type==="directory"&&U.name==="Tests");if(A)v(A.id),console.log("Found existing Tests directory:",A.id);else if(r.id){const U=c(r.id,"Tests");if(v(U),console.log("Created new Tests directory with ID:",U),s&&U){const $=(B=r.children)==null?void 0:B.find(X=>X.id===U);s.emit(g.DIRECTORY_CREATED,{parentDirId:r.id,newDirectory:$})}}};r&&r.children&&T()},[r,c,s]);const S=async()=>{if(!(n!=null&&n.content)){I.error("No file content to generate tests for");return}x(!0);try{const T=`Generate ${h} test cases for the following code. Include detailed test cases for edge cases, normal cases, and error handling. Return only the test code without explanations:

${n.content}`;console.log("Generating tests with framework:",h),console.log("Active file:",n.name);const A=await fetch("https://api.pollinations.ai/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:[{role:"system",content:`You are a test case generator for ${h}. Generate comprehensive test cases for the provided code. Only return the code, formatted correctly.`},{role:"user",content:T}],model:"mistral"})});if(!A.ok)throw new Error(`API responded with status: ${A.status}`);const G=await A.json();if(console.log("Test generation response:",G),G&&G.choices&&G.choices[0]&&G.choices[0].message){const B=G.choices[0].message.content||"// No tests generated";m(`\`\`\`${h==="jest"?"javascript":h}
${B}
\`\`\``),I.success("Test cases generated successfully"),O(B),s.emit(g.TEST_GENERATED,{fileName:n.name,testCode:B})}else throw new Error("Invalid response format from API")}catch(T){console.error("Error generating test cases:",T),I.error(`Failed to generate test cases: ${T.message}`),m("```\n// Failed to generate test cases\n```")}finally{x(!1)}},O=T=>{if(!n||!E){I.error("Could not create test file - active file or Tests directory not found");return}try{const{name:A}=n,U=`${A.split(".")[0]}${h==="pytest"?".py":".test.js"}`;console.log("Creating test file:",U,"in directory:",E);const $=u(E,U);if(!$){I.error("Failed to create test file - file ID was not returned");return}const X=T.replace(/```[\w]*\n?/g,"").trim();i($,X),console.log("Test file created with ID:",$),s.emit(g.FILE_CREATED,{parentDirId:E,newFile:{id:$,name:U,type:"file",content:X}}),I.success(`Test file ${U} created in Tests folder`)}catch(A){console.error("Error creating test file:",A),I.error(`Failed to create test file: ${A.message}`)}},_=async()=>{try{const T=l.replace(/```[\w]*\n?/g,"").trim();await navigator.clipboard.writeText(T),I.success("Test code copied to clipboard")}catch(T){I.error("Unable to copy test code"),console.error(T)}},M=()=>{if(!n||!l){I.error("No test output or active file");return}const T=l.replace(/```[\w]*\n?/g,"").trim();O(T)};return e.jsxs("div",{className:"flex max-h-full min-h-[400px] w-full flex-col gap-2 p-4",style:{height:t},children:[e.jsx("h1",{className:"view-title",children:"Test Generator"}),e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx("label",{htmlFor:"framework",className:"text-sm",children:"Test Framework:"}),e.jsxs("select",{id:"framework",className:"rounded-md border-none bg-darkHover p-1 text-white outline-none",value:h,onChange:T=>b(T.target.value),children:[e.jsx("option",{value:"jest",children:"Jest"}),e.jsx("option",{value:"mocha",children:"Mocha"}),e.jsx("option",{value:"pytest",children:"PyTest"}),e.jsx("option",{value:"junit",children:"JUnit"})]})]}),e.jsx("button",{className:"flex w-full justify-center rounded-md bg-primary p-2 font-bold text-black outline-none disabled:cursor-not-allowed disabled:opacity-50",onClick:S,disabled:f||!n,children:f?"Generating...":"Generate Test Cases"}),l&&e.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[e.jsx("button",{title:"Copy Test Code",onClick:_,children:e.jsx(he,{size:18,className:"cursor-pointer text-white"})}),e.jsx("button",{title:"Create Test File Manually",onClick:M,children:e.jsx(vt,{size:18,className:"cursor-pointer text-white"})})]}),e.jsx("div",{className:"h-full w-full overflow-y-auto rounded-lg p-0",children:e.jsx(Ae,{components:{code({inline:T,className:A,children:G,...B}){const U=/language-(\w+)/.exec(A||""),$=U?U[1]:"javascript";return T?e.jsx("code",{className:A,...B,children:G}):e.jsx(Pe,{style:_e,language:$,PreTag:"pre",className:"!m-0 !h-full !rounded-lg !bg-gray-900 !p-2",children:String(G).replace(/\n$/,"")})},pre({children:T}){return e.jsx("pre",{className:"h-full",children:T})}},children:l})})]})}const rt=o.createContext(null),me=()=>{const t=o.useContext(rt);if(!t)throw new Error("useViews must be used within a ViewContextProvider");return t};function Sn({children:t}){const{isMobile:s}=le(),[n,r]=o.useState(R.FILES),[i,a]=o.useState(!s),[c]=o.useState({[R.FILES]:e.jsx(fn,{}),[R.CLIENTS]:e.jsx(Nn,{}),[R.SETTINGS]:e.jsx(yn,{}),[R.COPILOT]:e.jsx(ln,{}),[R.CHATS]:e.jsx(en,{}),[R.RUN]:e.jsx(xn,{}),[R.VERSION_CONTROL]:e.jsx(En,{}),[R.TEST_GENERATOR]:e.jsx(vn,{})}),[u]=o.useState({[R.FILES]:e.jsx(Rt,{size:28}),[R.CLIENTS]:e.jsx(Tt,{size:30}),[R.SETTINGS]:e.jsx(kt,{size:28}),[R.CHATS]:e.jsx(It,{size:30}),[R.COPILOT]:e.jsx(Dt,{size:28}),[R.RUN]:e.jsx(St,{size:28}),[R.VERSION_CONTROL]:e.jsx(Fe,{size:28}),[R.TEST_GENERATOR]:e.jsx(Te,{size:28})});return e.jsx(rt.Provider,{value:{activeView:n,setActiveView:r,isSidebarOpen:i,setIsSidebarOpen:a,viewComponents:c,viewIcons:u},children:t})}function Dn({children:t}){const{isSidebarOpen:s}=me(),{isMobile:n,width:r}=le(),{setItem:i,getItem:a}=tt(),c=()=>{const b=document.createElement("div");return b.className="h-full cursor-e-resizer hidden md:block",b.style.backgroundColor="#e1e1ffb3",b},u=()=>{if(n)return[0,r];const b=a("editorSizes");let f=[35,65];return b&&(f=JSON.parse(b)),s?f:[0,r]},d=()=>n?[0,r]:s?[350,350]:[50,0],l=()=>n?[0,1/0]:s?[1/0,1/0]:[0,1/0],m=b=>{i("editorSizes",JSON.stringify(b))},h=()=>({width:"7px",display:s&&!n?"block":"none"});return e.jsx(Fs,{sizes:u(),minSize:d(),gutter:c,maxSize:l(),dragInterval:1,direction:"horizontal",gutterAlign:"center",cursor:"e-resize",snapOffset:30,gutterStyle:h,onDrag:m,className:"flex h-screen min-h-screen max-w-full items-center justify-center overflow-hidden",children:t})}function In(){return e.jsx("div",{className:"flex h-screen min-h-screen flex-col items-center justify-center gap-6 px-4 text-center",children:e.jsx(kn,{})})}const kn=()=>{const t=re(),s=()=>{window.location.reload()},n=()=>{t("/")};return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"whitespace-break-spaces text-lg font-medium text-slate-300",children:"Oops! Something went wrong. Please try again"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[e.jsx("button",{className:"mr-4 rounded-md bg-primary px-8 py-2 font-bold text-black",onClick:s,children:"Try Again"}),e.jsx("button",{className:"rounded-md bg-primary px-8 py-2 font-bold text-black",onClick:n,children:"Go to HomePage"})]})]})},ot={backgroundColor:"#e0e0e0",padding:"8px 12px",borderRadius:"6px",color:"#000",fontSize:"12px",fontWeight:"500",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},De={base:"relative flex items-center justify-center rounded transition-colors duration-200 ease-in-out p-2",hover:"hover:bg-[#3D404A]"},ne=({viewName:t,icon:s})=>{const{activeView:n,setActiveView:r,isSidebarOpen:i,setIsSidebarOpen:a}=me(),{isNewMessage:c}=we(),[u,d]=o.useState(!0),l=m=>{m===n?a(!i):(a(!0),r(m))};return e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsxs("button",{onClick:()=>l(t),onMouseEnter:()=>d(!0),className:`${De.base} ${De.hover}`,...u&&{"data-tooltip-id":`tooltip-${t}`,"data-tooltip-content":t},children:[e.jsx("div",{className:"flex items-center justify-center",children:s}),t===R.CHATS&&c&&e.jsx("div",{className:"absolute right-0 top-0 h-3 w-3 rounded-full bg-primary"})]}),u&&e.jsx(ze,{id:`tooltip-${t}`,place:"right",offset:25,className:"!z-50",style:ot,noArrow:!1,positionStrategy:"fixed",float:!0})]})};function Tn(){const{activeView:t,isSidebarOpen:s,viewComponents:n,viewIcons:r,setIsSidebarOpen:i}=me(),{minHeightReached:a}=V(),{activityState:c,setActivityState:u}=Y(),{socket:d}=K(),{isMobile:l}=le(),[m,h]=o.useState(!0),b=()=>{h(!1),c===se.CODING?(u(se.DRAWING),d.emit(g.REQUEST_DRAWING)):u(se.CODING),l&&i(!1)};return e.jsxs("aside",{className:"flex w-full md:h-full md:max-h-full md:min-h-full md:w-auto",children:[e.jsxs("div",{className:ae("fixed bottom-0 left-0 z-50 flex h-[50px] w-full gap-4 self-end overflow-hidden border-t border-darkHover bg-dark p-2 md:static md:h-full md:w-[50px] md:min-w-[50px] md:flex-col md:border-r md:border-t-0 md:p-2 md:pt-4",{hidden:a}),children:[e.jsx(ne,{viewName:R.FILES,icon:r[R.FILES]}),e.jsx(ne,{viewName:R.CHATS,icon:r[R.CHATS]}),e.jsx(ne,{viewName:R.COPILOT,icon:r[R.COPILOT]}),e.jsx(ne,{viewName:R.RUN,icon:r[R.RUN]}),e.jsx(ne,{viewName:R.VERSION_CONTROL,icon:r[R.VERSION_CONTROL]}),e.jsx(ne,{viewName:R.CLIENTS,icon:r[R.CLIENTS]}),e.jsx(ne,{viewName:R.SETTINGS,icon:r[R.SETTINGS]}),e.jsxs("div",{className:"flex h-fit items-center justify-center",children:[e.jsx("button",{className:"justify-cente flex items-center  rounded p-1.5 transition-colors duration-200 ease-in-out hover:bg-[#3D404A]",onClick:b,onMouseEnter:()=>h(!0),"data-tooltip-id":"activity-state-tooltip","data-tooltip-content":c===se.CODING?"Switch to Drawing Mode":"Switch to Coding Mode",children:c===se.CODING?e.jsx(Lt,{size:30}):e.jsx(Ot,{size:30})}),m&&e.jsx(ze,{id:"activity-state-tooltip",place:"right",offset:15,className:"!z-50",style:ot,noArrow:!1,positionStrategy:"fixed",float:!0})]})]}),e.jsx("div",{className:"absolute left-0 top-0 z-20 w-full flex-col bg-dark md:static md:min-w-[300px]",style:s?{}:{display:"none"},children:n[t]})]})}function Rn(){const{isMobile:t}=le();return e.jsx(As,{inferDarkMode:!0,forceMobile:t,defaultName:"Editor",className:"z-0",children:e.jsx(Ln,{})})}function Ln(){const t=Ps(),{drawingData:s,setDrawingData:n}=Y(),{socket:r}=K(),i=o.useCallback(c=>{const u=c.changes;n(t.store.getSnapshot()),r.emit(g.DRAWING_UPDATE,{snapshot:u})},[t.store,n,r]),a=o.useCallback(({snapshot:c})=>{t.store.mergeRemoteChanges(()=>{const{added:u,updated:d,removed:l}=c;for(const m of Object.values(u))t.store.put([m]);for(const[,m]of Object.values(d))t.store.put([m]);for(const m of Object.values(l))t.store.remove([m.id])}),n(t.store.getSnapshot())},[t.store,n]);return o.useEffect(()=>{s&&Object.keys(s).length>0&&t.store.loadSnapshot(s)},[]),o.useEffect(()=>{const c=t.store.listen(i,{source:"user",scope:"document"});return r.on(g.DRAWING_UPDATE,a),()=>{c(),r.off(g.DRAWING_UPDATE)}},[s,t.store,i,a,r]),null}function On(){const{fontSize:t,setFontSize:s}=ge();o.useEffect(()=>{const n=r=>{const i="Changes you made may not be saved";return r.returnValue=i};return window.addEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n)}},[]),o.useEffect(()=>{const n=r=>{if(r.ctrlKey){if(r.preventDefault(),!r.target.closest(".cm-editor"))return;r.deltaY>0?s(Math.max(t-1,12)):s(Math.min(t+1,24))}};return window.addEventListener("wheel",n,{passive:!1}),()=>{window.removeEventListener("wheel",n)}},[t,s])}function Fn(t){return Ms.define({create:()=>Ie(t),update(s,n){return!n.docChanged&&!n.selection?s:Ie(t)},provide:s=>Us.computeN([s],n=>n.field(s))})}function Ie(t){return t.map(s=>{if(!s.typing)return null;let n=s.username;const r=s.cursorPosition;return s&&(n=s.username),{pos:r,above:!0,strictSide:!0,arrow:!0,create:()=>{const i=document.createElement("div");return i.className="cm-tooltip-cursor",i.textContent=n,{dom:i}}}})}const An=_s.baseTheme({".cm-tooltip.cm-tooltip-cursor":{backgroundColor:"#66b",color:"white",border:"none",padding:"2px 7px",borderRadius:"4px",zIndex:"10","& .cm-tooltip-arrow:before":{borderTopColor:"#66b"},"& .cm-tooltip-arrow:after":{borderTopColor:"transparent"}}});function Pn(){var W;const t=Ge(),{roomId:s}=t,n=re(),r=be(),i=void 0,[a,c]=o.useState(!1),[u,d]=o.useState(""),{users:l,currentUser:m,setCurrentUser:h,setUsers:b,status:f}=Y(),[x,E]=o.useState(""),{activeFile:v,setActiveFile:S,toggleFileLock:O}=Q(),{theme:_,language:M,fontSize:T}=ge(),{socket:A}=K(),{viewHeight:G}=V(),[B,U]=o.useState(setTimeout(()=>{},0)),$=o.useMemo(()=>l.filter(z=>z.username!==m.username),[l,m]),[X,oe]=o.useState([]),C=(v==null?void 0:v.isLocked)&&(v==null?void 0:v.lockedBy)!==m.username,k=(z,ee)=>{var N,D,y;if(!v)return;if(C){I.error(`This file is locked by ${v.lockedBy}`);return}const p={...v,content:z};S(p);const w=(y=(D=(N=ee.state)==null?void 0:N.selection)==null?void 0:D.main)==null?void 0:y.head;A.emit(g.TYPING_START,{cursorPosition:w}),A.emit(g.FILE_UPDATED,{fileId:v.id,newContent:z}),clearTimeout(B);const j=setTimeout(()=>A.emit(g.TYPING_PAUSE),1e3);U(j)};On();const L=()=>{if(!v)return;O(v.id,m.username);const z=v.isLocked?"unlocked":"locked";I.success(`File ${z} successfully`,{duration:3e3})};o.useEffect(()=>{if(m.username.length>0)return;const z=localStorage.getItem("username")??"";if(z===void 0)n("/",{state:{roomId:s}});else if(s){const ee={username:z,roomId:s};h(ee),A.emit(g.JOIN_REQUEST,ee)}},[m.username,(W=r.state)==null?void 0:W.username,n,s,h,A]);const H=async()=>{try{const z=await ie.get(`${i}/lock`,{params:{roomId:s}});c(!0),d(`${z.data.admin}`),setTimeout(()=>{c(!1)},3e3)}catch(z){console.error(z,"error while getting lock value")}};return o.useEffect(()=>{H()},[]),o.useEffect(()=>{const z=localStorage.getItem("data");if(z===null)console.error("Data not found in local storage");else try{const w=JSON.parse(z);E(w.type)}catch(w){console.error("Error parsing data:",w)}const ee=[Is,ks,Fn($),An,Gs()],p=Ts(M.toLowerCase());p?ee.push(p):I.error("Syntax highlighting is unavailable for this language. Please adjust the editor settings; it may be listed under a different name.",{duration:5e3}),oe(ee)},[$,M]),e.jsxs(e.Fragment,{children:[C&&e.jsxs("div",{className:"absolute top-1 left-2 z-10 flex items-center gap-2 rounded-full bg-red-600 px-4 py-2 font-medium text-white",children:[e.jsx("span",{children:e.jsx(je,{})}),e.jsxs("span",{children:["Locked by ",v.lockedBy]})]}),v&&e.jsx("div",{className:"absolute top-1 right-4 z-10",children:e.jsxs("button",{className:"flex items-center gap-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 px-4 py-2 font-medium text-white shadow-lg transition-all hover:animate-pulse hover:shadow-xl active:scale-95",onClick:L,disabled:C,title:C?`Locked by ${v.lockedBy}`:v.isLocked?"Unlock this file":"Lock this file",children:[e.jsx("span",{children:v.isLocked?e.jsx(je,{}):e.jsx(Ft,{})}),e.jsx("span",{children:v.isLocked?"Unlock File":"Lock File"})]})}),u&&x=="user"&&a&&e.jsx("div",{className:"absolute bottom-20 right-7 z-50",children:e.jsx("div",{id:u.includes("Locked")?"animatedButton":"animatedButtonn",className:"rounded-lg p-4 shadow-md backdrop-blur-md backdrop-brightness-125 backdrop-filter",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-lg font-bold",style:{textShadow:"0.5px 0.5px 3px black"},children:u}),e.jsx("button",{className:"ml-4 text-white hover:text-gray-300",onClick:()=>c(!1),"aria-label":"Close",children:"✕"})]})})}),e.jsx(Rs,{theme:nt[_],onChange:k,value:v==null?void 0:v.content,extensions:X,minHeight:"100%",maxWidth:"100vw",style:{fontSize:T+"px",height:G,position:"relative"},readOnly:C})]})}const ke={php:"php",cs:"csharp",cpp:"cpp",cc:"cpp",cxx:"cpp",c:"c",h:"cpp",hpp:"cpp"};function _n(){const{openFiles:t,closeFile:s,activeFile:n,updateFileContent:r,setActiveFile:i}=Q(),a=o.useRef(null),{setLanguage:c}=ge(),u=d=>{if((n==null?void 0:n.id)===d)return;r((n==null?void 0:n.id)||"",(n==null?void 0:n.content)||"");const l=t.find(m=>m.id===d);l&&i(l)};return o.useEffect(()=>{const d=a.current;if(!d)return;const l=m=>{m.deltaY>0?d.scrollLeft+=100:d.scrollLeft-=100};return d.addEventListener("wheel",l),()=>{d.removeEventListener("wheel",l)}},[]),o.useEffect(()=>{if((n==null?void 0:n.name)===void 0)return;const d=n.name.split(".").pop();if(!d)return;if(ke[d]){c(ke[d]);return}if(["cpp","cc","cxx","h","hpp"].includes(d)){c("cpp");return}const l=Ue.languages(d);c(l[0])},[n==null?void 0:n.name,c]),e.jsx("div",{className:"flex h-[50px] w-full select-none gap-2 overflow-x-auto p-2 pb-0",ref:a,children:t.map(d=>e.jsxs("span",{className:ae("flex w-fit cursor-pointer items-center rounded-t-md px-2 py-1 text-white",{"bg-darkHover":d.id===(n==null?void 0:n.id)}),onClick:()=>u(d.id),children:[e.jsx(Me,{icon:Qe(d.name),fontSize:22,className:"mr-2 min-w-fit"}),e.jsx("p",{className:"flex-grow cursor-pointer overflow-hidden truncate",title:d.name,children:d.name}),e.jsx(At,{className:"ml-3 inline rounded-md hover:bg-darkHover",size:20,onClick:()=>s(d.id)})]},d.id))})}function Mn(){const{openFiles:t}=Q(),{minHeightReached:s}=V();return t.length<=0?e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx("h1",{className:"text-xl text-white",children:"No file is currently open."})}):e.jsxs("main",{className:ae("flex w-full flex-col overflow-x-auto md:h-screen",{"h-[calc(100vh-50px)]":!s,"h-full":s}),children:[e.jsx(_n,{}),e.jsx(Pn,{})]})}function Un(){const{viewHeight:t}=V(),{activityState:s}=Y();return e.jsx("div",{className:"absolute left-0 top-0 w-full max-w-full flex-grow overflow-x-hidden md:static",style:{height:t},children:s===se.DRAWING?e.jsx(Rn,{}):e.jsx(Mn,{})})}function Gn(){function t(){return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(r=>navigator.userAgent.match(r))}const s=t();o.useEffect(()=>{s&&Ne.isEnabled&&Ne.request()},[s])}function zn(){const{setUsers:t}=Y(),{socket:s}=K(),n=o.useCallback(()=>{document.visibilityState==="visible"?s.emit(g.USER_ONLINE,{socketId:s.id}):document.visibilityState==="hidden"&&s.emit(g.USER_OFFLINE,{socketId:s.id})},[s]),r=o.useCallback(({socketId:c})=>{t(u=>u.map(d=>d.socketId===c?{...d,status:ue.ONLINE}:d))},[t]),i=o.useCallback(({socketId:c})=>{t(u=>u.map(d=>d.socketId===c?{...d,status:ue.OFFLINE}:d))},[t]),a=o.useCallback(({user:c})=>{t(u=>u.map(d=>d.socketId===c.socketId?c:d))},[t]);o.useEffect(()=>(document.addEventListener("visibilitychange",n),s.on(g.USER_ONLINE,r),s.on(g.USER_OFFLINE,i),s.on(g.TYPING_START,a),s.on(g.TYPING_PAUSE,a),()=>{document.removeEventListener("visibilitychange",n),s.off(g.USER_ONLINE),s.off(g.USER_OFFLINE),s.off(g.TYPING_START),s.off(g.TYPING_PAUSE)}),[s,t,n,r,i,a])}function Hn(){var u;zn(),Gn();const t=re(),{roomId:s}=Ge(),{status:n,setCurrentUser:r,currentUser:i}=Y(),{socket:a}=K(),c=be();return o.useEffect(()=>{var l;if(i.username.length>0)return;const d=(l=c.state)==null?void 0:l.username;if(d===void 0)t("/",{state:{roomId:s}});else if(s){const m={username:d,roomId:s};r(m),a.emit(g.JOIN_REQUEST,m)}},[i.username,(u=c.state)==null?void 0:u.username,t,s,r,a]),n===q.CONNECTION_FAILED?e.jsx(In,{}):e.jsxs(Dn,{children:[e.jsx(Tn,{}),e.jsx(Un,{})]})}const ye="/assets/illustration-Azuc-YCm.svg",$n=()=>{var E,v;const t="http://localhost:3000",s=be(),{currentUser:n,setCurrentUser:r,status:i,setStatus:a}=Y(),{socket:c}=K(),[u,d]=o.useState(localStorage.getItem("username")||"");console.log("Current username from localStorage:",u);const l=o.useRef(null),m=re();o.useEffect(()=>{u&&(console.log("Setting username from localStorage:",u),r({...n,username:u}))},[u]);const h=()=>{var O;const S=Z();r({...n,roomId:S}),console.log("Created new room ID:",S),P.success("Created a new Room Id"),(O=l.current)==null||O.focus()},b=S=>{const O=S.target.name,_=S.target.value;console.log(`Input changed: ${O} = ${_}`),r({...n,[O]:_})},f=()=>n.username.trim().length===0?(P.error("Enter your username"),!1):n.roomId.trim().length===0?(P.error("Enter a room id"),!1):n.roomId.trim().length<5?(P.error("ROOM Id must be at least 5 characters long"),!1):n.username.trim().length<3?(P.error("Username must be at least 3 characters long"),!1):!0,x=async S=>{if(S.preventDefault(),!f())return;const O=n.roomId,_=n.username;console.log("Attempting to join room:",O,_);try{const M=await ie.post(`${t}/create-or-update-room`,{roomId:O,username:_});console.log("Server response:",M.data),localStorage.setItem("data",JSON.stringify(M.data.data)),P.success(M.data.message),i!==q.ATTEMPTING_JOIN&&(P.loading("Joining room..."),a(q.ATTEMPTING_JOIN),c.emit(g.JOIN_REQUEST,n))}catch(M){console.error("Error joining room:",M),P.error("Failed to join room. Please try again.")}};return o.useEffect(()=>{var S;n.roomId.length>0||(S=s.state)!=null&&S.roomId&&(r({...n,roomId:s.state.roomId}),n.username.length===0&&P.success("Enter your username"))},[n,(E=s.state)==null?void 0:E.roomId,r]),o.useEffect(()=>{if(i===q.DISCONNECTED&&!c.connected){console.log("Socket disconnected, reconnecting..."),c.connect();return}const S=sessionStorage.getItem("redirect")||!1;if(console.log("Current status:",i,"isRedirect:",S),i===q.JOINED&&!S){const O=n.username;console.log("Joined room, redirecting to editor..."),sessionStorage.setItem("redirect","true"),m(`/editor/${n.roomId}`,{state:{username:O}})}else i===q.JOINED&&S&&(console.log("Already redirected, resetting socket..."),sessionStorage.removeItem("redirect"),a(q.DISCONNECTED),c.disconnect(),c.connect())},[n,(v=s.state)==null?void 0:v.redirect,m,a,c,i]),e.jsxs("div",{className:"flex w-full max-w-[500px] flex-col items-center justify-center gap-4 p-4 sm:w-[500px] sm:p-8",children:[e.jsx("h2",{className:"bg-gradient-to-r from-green-500 via-green-600 to-green-700 bg-clip-text text-4xl font-bold text-transparent",children:"Code Sync"}),e.jsxs("form",{onSubmit:x,className:"flex w-full flex-col gap-4 rounded-lg bg-black bg-opacity-60 p-8 shadow-lg backdrop-blur-md",children:[e.jsx("input",{type:"text",name:"roomId",placeholder:"Enter Room Id",className:"w-full rounded-md border border-green-500 bg-black bg-opacity-70 px-3 py-3 text-green-500 placeholder:text-green-300 focus:outline-none",onChange:b,value:n.roomId}),e.jsx("input",{type:"text",name:"username",placeholder:n.username?n.username:"enter",className:"w-full rounded-md border border-green-500 bg-black bg-opacity-70 px-3 py-3 text-green-500 placeholder:text-green-300 focus:outline-none",onChange:b,value:n.username,ref:l}),e.jsx("button",{type:"submit",className:"mt-2 w-full rounded-md bg-green-500 px-8 py-3 text-lg font-semibold text-black hover:bg-green-400",children:"Join"}),e.jsx("button",{type:"button",className:"cursor-pointer select-none text-green-500 underline hover:text-green-300",onClick:h,children:"Create Room with One Click"})]})]})};function Bn(){return o.useEffect(()=>{const t=localStorage.getItem("username");console.log("Stored username:",t)},[]),e.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center gap-16 bg-dark text-light",children:e.jsxs("div",{className:"my-12 flex h-full min-w-full flex-col items-center justify-evenly sm:flex-row sm:pt-0",children:[e.jsx("div",{className:"flex w-full animate-up-down justify-center sm:w-1/2 sm:pl-4",children:e.jsx("img",{src:ye,alt:"Code Sync Illustration",className:"mx-auto w-[250px] sm:w-[400px]"})}),e.jsx("div",{className:"flex w-full items-center justify-center sm:w-1/2",children:e.jsx($n,{})})]})})}function Jn(){const[t,s]=o.useState(""),[n,r]=o.useState(""),[i,a]=o.useState(""),[c,u]=o.useState(""),[d,l]=o.useState(""),m=re(),h=async b=>{b.preventDefault(),u(""),l("");try{const f=await ie.post("http://127.0.0.1:3000/register",{username:t,mobile:n,password:i});console.log(f.data,"..response data"),alert(f.data.message),l("Registration successful!"),s(""),r(""),a(""),m("/loginpage")}catch(f){u(f.response?f.response.data.message:"Error registering user. Please try again.")}};return e.jsx("div",{className:"flex min-h-screen flex-col items-center justify-center gap-16",children:e.jsxs("div",{className:"my-12 flex h-full min-w-full flex-col items-center justify-evenly sm:flex-row sm:pt-0",children:[e.jsx("div",{className:"flex w-full animate-up-down justify-center sm:w-1/2 sm:pl-4",children:e.jsx("img",{src:ye,alt:"Code Sync Illustration",className:"mx-auto w-[250px] sm:w-[400px]"})}),e.jsx("div",{className:"flex h-screen w-1/2 items-center justify-center",children:e.jsxs("div",{className:"b-2 w-3/4 rounded-3xl border-green-900 bg-black/50 p-8 text-center backdrop-blur-sm",children:[e.jsx("h2",{className:"mb-4 text-3xl text-green-500",children:"Register"}),d&&e.jsx("div",{style:{color:"green"},children:d}),c&&e.jsx("div",{style:{color:"red"},children:c}),e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:h,children:[e.jsx("input",{type:"text",id:"username",value:t,onChange:b=>s(b.target.value),required:!0,placeholder:"Username",className:"rounded-lg border  border-green-500 bg-transparent p-2 focus:outline-none focus:ring-green-500"}),e.jsx("input",{type:"tel",id:"mobile",value:n,maxLength:10,onChange:b=>r(b.target.value),required:!0,placeholder:"Mobile Number",className:"rounded-lg border border-green-500 bg-transparent p-2 focus:outline-none focus:ring-green-500"}),e.jsx("input",{type:"password",id:"password",value:i,onChange:b=>a(b.target.value),required:!0,placeholder:"Password",className:"rounded-lg border border-green-500 bg-transparent p-2 focus:outline-none focus:ring-green-500"}),e.jsx(pe,{to:"/loginpage",children:e.jsx("p",{className:"",children:"Already have an account? Login"})}),e.jsx("button",{type:"submit",className:"rounded-lg bg-green-500 px-4 py-2 font-bold text-white hover:bg-green-700",children:"Register"})]})]})})]})})}function Yn(){const[s,n]=o.useState(""),[r,i]=o.useState(""),[a,c]=o.useState(""),[u,d]=o.useState(""),l=re(),m=async h=>{var b,f;h.preventDefault(),c(""),d("");try{const x=await ie.post("undefined/login",{username:s,password:r});alert(x.data.message),d("Login successful!"),n(""),i(""),s?(localStorage.setItem("username",s),l("/createRoom")):l("/login")}catch(x){c(((f=(b=x.response)==null?void 0:b.data)==null?void 0:f.message)||"An error occurred")}};return e.jsxs("div",{className:"to-green-1000 flex h-screen items-center justify-center bg-gradient-to-b from-black",children:[e.jsx("div",{className:"flex w-full animate-up-down justify-center sm:w-1/2 sm:pl-4",children:e.jsx("img",{src:ye,alt:"Code Sync Illustration",className:"mx-auto w-[250px] sm:w-[400px]"})}),e.jsx("div",{className:"flex h-screen w-1/2 items-center justify-center",children:e.jsxs("div",{className:"b-2 w-3/4 rounded-3xl border-green-900 bg-black/50 p-8 text-center backdrop-blur-sm",children:[e.jsx("h2",{className:"mb-4 text-3xl text-green-500",children:"Login"}),u&&e.jsx("div",{style:{color:"green"},children:u}),a&&e.jsx("div",{style:{color:"red"},children:a}),e.jsxs("form",{className:"flex flex-col gap-4",onSubmit:m,children:[e.jsx("input",{type:"text",id:"username",value:s,onChange:h=>n(h.target.value),required:!0,placeholder:"Username",className:"rounded-lg border  border-green-500 bg-transparent p-2 focus:outline-none focus:ring-green-500"}),e.jsx("input",{type:"password",id:"password",value:r,onChange:h=>i(h.target.value),required:!0,placeholder:"Password",className:"rounded-lg border border-green-500 bg-transparent p-2 focus:outline-none focus:ring-green-500"}),e.jsx(pe,{to:"/register",children:e.jsx("p",{className:"",children:"Don't have an account? Register"})}),e.jsx("button",{type:"submit",className:"rounded-lg bg-green-500 px-4 py-2 font-bold text-white hover:bg-green-700",children:"Login"})]})]})})]})}const Vn=()=>{const[t,s]=o.useState(!1);o.useEffect(()=>{zs(async i=>{await Js(i)}).then(()=>{s(!0)})},[]);const n=async i=>{console.log(i)},r=o.useMemo(()=>({background:{color:{value:"black"}},fpsLimit:120,interactivity:{events:{onClick:{enable:!0,mode:"push"},onHover:{enable:!0,mode:"repulse"}},modes:{push:{quantity:4},repulse:{distance:200,duration:.4}}},particles:{color:{value:"#ffffff"},links:{color:"#ffffff",distance:150,enable:!0,opacity:.5,width:1},move:{direction:$s.none,enable:!0,outModes:{default:Hs.out},random:!1,speed:6,straight:!1},number:{density:{enable:!0},value:80},opacity:{value:.5},shape:{type:"circle"},size:{value:{min:1,max:5}}},detectRetina:!0}),[]);return t?e.jsxs("div",{className:"relative min-h-screen",children:[e.jsx(Bs,{id:"tsparticles",particlesLoaded:n,options:r,className:"absolute left-0 top-0 h-full w-full"}),e.jsx("div",{className:"relative z-10 flex min-h-screen items-center justify-center bg-transparent text-white",children:e.jsxs("div",{className:"px-4 text-center md:px-12",children:[e.jsx("h1",{className:"mb-4 text-4xl font-bold text-green-500 md:text-6xl",children:"Welcome to Code Sync"}),e.jsx("p",{className:"mb-6 text-lg text-gray-400 md:text-xl",children:"Stay in sync with your code and collaborate effortlessly with your team."}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(pe,{to:"/loginpage",children:e.jsx("a",{href:"#login",className:"inline-block rounded-lg bg-green-500 px-6 py-3 font-semibold text-black transition-all duration-300 hover:bg-green-600",children:"Login"})}),e.jsx(pe,{to:"/register",children:e.jsx("a",{href:"#register",className:"inline-block rounded-lg border-2 border-green-500 px-6 py-3 font-semibold text-green-500 transition-all duration-300 hover:bg-green-500 hover:text-black",children:"Register"})})]})]})})]}):e.jsx("div",{style:{display:"flex",justifyContent:"center",alignContent:"center",height:"100vh"},children:e.jsx("h1",{children:"Loading..."})})},Wn=()=>e.jsxs(e.Fragment,{children:[e.jsx(at,{children:e.jsxs(Os,{children:[e.jsx(de,{path:"/",element:e.jsx(Vn,{})}),e.jsx(de,{path:"/register",element:e.jsx(Jn,{})}),e.jsx(de,{path:"/loginpage",element:e.jsx(Yn,{})}),e.jsx(de,{path:"/createRoom",element:e.jsx(Bn,{})}),e.jsx(de,{path:"/editor/:roomId",element:e.jsx(Hn,{})})]})}),e.jsx(Ys,{})," "]});function qn({children:t}){return e.jsx(Vs,{children:e.jsx(qs,{children:e.jsx(bn,{children:e.jsx(Sn,{children:e.jsx(an,{children:e.jsx(nn,{children:e.jsx(gn,{children:e.jsx(Ks,{children:t})})})})})})})})}it.createRoot(document.getElementById("root")).render(e.jsx(qn,{children:e.jsx(Wn,{})}));
